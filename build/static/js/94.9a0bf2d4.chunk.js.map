{"version":3,"sources":["views/TicketPriorities/AddNewPriority/AddNewPriority.js"],"names":["AddNewPriority","useTranslation","t","i18n","history","useHistory","useState","visible","setVisible","errorMessage","setErrorMessage","succesAdd","setSuccessAdd","loading","setLoading","tokenString","localStorage","getItem","userToken","JSON","parse","name_en","name_ar","time_to_resolve","days_to_resolve","upData","setUpData","handleData","e","target","name","value","handleAddPriority","a","preventDefault","fetch","global","apiUrl","method","headers","Authorization","Accept","body","stringify","color","responsee","json","response","console","log","success","language","setColor","messages","className","md","lg","xl","onClick","goBack","xs","sm","onSubmit","row","htmlFor","required","onChange","placeholder","type","min","hex","disablePlainColor","show","onShowChange","Object","keys","map","item","i","block"],"mappings":"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","file":"static/js/94.9a0bf2d4.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardFooter,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CPagination,\n  CDataTable,\n  CSelect,\n  CFormText,\n  CTextarea,\n  CFormGroup,\n  CLabel,\n  CSwitch,\n  CInputFile,\n  CLink,\n  CFade,\n  CCollapse,\n  CBadge,\n  CRow\n} from '@coreui/react'\nimport 'react-phone-number-input/style.css'\nimport PhoneInput from 'react-phone-number-input'\nimport CIcon from '@coreui/icons-react'\nimport './AddNewPriority.scss'\n\nimport { CAlert } from '@coreui/react'\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from 'react-i18next';\nimport TimeField from 'react-simple-timefield';\nimport { ColorPicker, createColor } from \"material-ui-color\";\nimport Box from \"@material-ui/core/Box\";\nimport '../../../globalVar'\n// import { set } from 'core-js/core/dict'\n// import MIN_SAFE_INTEGER from 'core-js/fn/number/min-safe-integer'\nconst AddNewPriority = () => {\n  const [t, i18n] = useTranslation();\n  let history = useHistory();\n  const [visible, setVisible] = useState(10)\n\n  const [fetchedData, setfetchedData] = useState([])\n  const [refresh, setRefresh] = useState('')\n  const [errorMessage, setErrorMessage] = useState();\n\n  const [succesAdd, setSuccessAdd] = useState()\n  const [loading, setLoading] = useState('')\n  const tokenString = localStorage.getItem(\"token\");\n  const userToken = JSON.parse(tokenString);\n  const [pickedImg, setPickedImg] = useState('')\n  // const userId = localStorage.getItem(\"user_id\");\n  // const user_id = JSON.parse(userId);\n\n  const [upData, setUpData] = useState({\n    name_en: '',\n    name_ar: '',\n    time_to_resolve:'',\n    days_to_resolve:''\n    // criteriaDirection: '',\n    // criteriaDigits: '',\n    // countryId: '',\n    // departmentAr: '',\n    // departmentEn: '',\n    // userName: '',\n    // userUserName: '',\n    // email: '',\n    // extentionNumber: '',\n    // password: '',\n    // confirmPassword: '',\n    // userPosition: '',\n    // role: '',\n    // address:''\n\n\n  })\n  const { name_en,\n    name_ar,\n    time_to_resolve,\n    days_to_resolve\n\n  } = upData;\n\n  // useEffect(async () => {\n  //   const fetchCountries = async (e) => {\n  //     try {\n  //       const responsee = await fetch(\n  //         `${global.apiUrl}/super/countries?paginate=0`,\n  //         {\n  //           method: \"GET\",\n  //           headers: {\n  //             Authorization: \"Bearer \" + userToken,\n\n  //             Accept: \"application/json\",\n  //           },\n  //         }\n  //       );\n  //       const response = await responsee.json();\n  //       console.log(response);\n\n  //       if (response.success) {\n  //         setfetchedData(response.payload)\n  //       }\n\n\n  //       if (response.message && response.message == \"Unauthenticated.\") {\n  //         localStorage.removeItem(\"token\");\n  //         localStorage.clear()\n\n  //         history.push(\"/login\");\n  //       }\n\n  //     } catch (err) {\n  //       console.log(err);\n\n  //     }\n\n  //     // setLoading(false)\n\n\n  //   }\n\n  //   fetchCountries()\n  // }, [refresh])\n\n\n\n  const handleData = (e) => {\n    setUpData({ ...upData, [e.target.name]: e.target.value })\n\n    setErrorMessage('')\n    setSuccessAdd('')\n  }\n \n\n\n \n\n\n  const handleAddPriority = async (e) => {\n    e.preventDefault()\n    setLoading(true)\n\n    setErrorMessage('')\n    setSuccessAdd('')\n\n    try {\n      const responsee = await fetch(\n        `${global.apiUrl}/super/ticketPriorities`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + userToken,\n             \"Content-Type\": \"application/json\",\n            'Access-Control-Allow-Origin': 'https://localhost:3000',\n            'Access-Control-Allow-Credentials': 'true',\n            Accept: \"application/json\",\n          },\n          body: JSON.stringify({\n            name_en,\n    name_ar,\n    time_to_resolve,\n    days_to_resolve,\n    color\n     \n          })\n          ,\n\n        }\n      );\n      const response = await responsee.json();\n      console.log('response', response);\n      console.log(response);\n      setVisible(10)\n      if (response.success) {\n        await setVisible(6)\n        setSuccessAdd(i18n.language == 'ar' ? \"تمت اضافة أولوية بنجاح\" : \"New Ticket Priority Added Successfuly\")\n\n\n        setUpData({\n          name_en: '',\n    name_ar: '',\n    time_to_resolve:'',\n    days_to_resolve:''\n        })\n      setColor('#000')\n      }\n      else {\n\n        setVisible(10)\n        setErrorMessage(response.messages)\n\n\n      }\n\n\n    } catch (err) {\n      console.log(err);\n\n    }\n\n    setLoading(false)\n  }\nconsole.log(upData)\nconst [color, setColor] = useState('#333');\n// createColor(\"#000\")\nconst handleChange = (value) => {\n  console.log(\"onChange=\", value.hex);\n  setColor('#'+value.hex);\n};\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center justify-content-center register-cont\">\n\n      <CContainer>\n\n\n        <CCard className=\"\">\n\n\n\n          <CCardHeader>\n            <CRow className=\" row-gap-15\">\n\n              <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n                <strong>{i18n.language == 'ar' ? \"إضافة أولوية بطاقة جديدة\" : \"Add New Ticket Priority\"}</strong>\n              </CCol>\n              <CCol md=\"6\" lg=\"6\" xl=\"6\" className='row-gap-15 col-gap-15'>\n          \n          <CButton color=\"success\"  className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n         onClick={()=>history.goBack()} >{i18n.language == 'ar' ? `رجوع` : `Back`}\n                </CButton>\n             \n          </CCol>\n            </CRow>\n          </CCardHeader>\n\n          <CRow>\n            <CCol xs=\"12\" sm=\"12\" md=\"12\" className=''>\n              <CForm onSubmit={(e) => { handleAddPriority(e) }}>\n                <CCardBody>\n                  <CCard>\n                    <CCardBody>\n                      <CRow >\n                     \n\n                        {/* className=\"justify-content-center\" */}\n                       \n                        <CCol md='12'> <strong>{i18n.language == 'ar' ? `معلومات الأولوية :` : `Priority Informations :`}</strong></CCol>\n                        <CCol md=\"6\" lg=\"6\" xl=\"6\">\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <CLabel htmlFor=\"text-input\">{i18n.language == 'ar' ? `الاسم الانكليزي` : `English Name`}</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"12\">\n\n                              <CInput name=\"name_en\"\n                                required\n                                onChange={handleData}\n                                placeholder={i18n.language == 'ar' ? `الاسم الانكليزي` : `English Name`}\n                                value={upData.name_en} />\n                            </CCol>\n                          </CFormGroup>\n                        </CCol>\n                        <CCol md=\"6\" lg=\"6\" xl=\"6\">\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <CLabel htmlFor=\"text-input\">{i18n.language == 'ar' ? `الاسم العربي` : `Arabic Name`}</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"12\">\n\n                              <CInput name=\"name_ar\"\n                                required\n                                className='arabic-align'\n                                onChange={handleData}\n                                placeholder={i18n.language == 'ar' ? `الاسم العربي` : `Arabic Name`}\n                                value={upData.name_ar} />\n                            </CCol>\n                          </CFormGroup>\n                        </CCol>\n                        <CCol md=\"3\" lg=\"3\" xl=\"3\">\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <CLabel htmlFor=\"text-input\">{i18n.language == 'ar' ? `الزمن اللازم للمعالجة` : `Time To Resolve`}</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"12\">\n                            <TimeField\n                            required\n                            name=\"time_to_resolve\"\n                             className=\"form-control time_to_resolve \"\n                              value={upData.time_to_resolve}\n                               onChange={handleData}\n                              \n                              />\n                              {/* <CInput name=\"time_to_resolve\"\n                                required\n                                type='time'\n                                onChange={handleData}\n                                placeholder={i18n.language == 'ar' ? `الاسم ` : `Arabic Name`}\n                                value={upData.time_to_resolve} /> */}\n                            </CCol>\n                          </CFormGroup>\n                        </CCol>\n                        <CCol md=\"3\" lg=\"3\" xl=\"3\">\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <CLabel htmlFor=\"text-input\">{i18n.language == 'ar' ? `الأيام اللازمة للمعالجة` : `Days To Resolve`}</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"12\">\n\n                              <CInput name=\"days_to_resolve\"\n                                required\n                                type='number'\n                                min='0'\n                                onChange={handleData}\n                                placeholder={i18n.language == 'ar' ? `الأيام اللازمة للمعالجة` : `Days To Resolve`}\n                                value={upData.days_to_resolve} />\n                            </CCol>\n                          </CFormGroup>\n                        </CCol>\n                        <CCol md=\"3\" lg=\"3\" xl=\"3\">\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <CLabel htmlFor=\"text-input\">{i18n.language == 'ar' ? `اللون` : `Color`}</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"12\">\n                            <ColorPicker value={color} onChange={handleChange} disablePlainColor />\n                            </CCol>\n                          </CFormGroup>\n                        </CCol>\n          \n          \n\n                      </CRow>\n\n\n                    </CCardBody>\n                    <CCardFooter className=\"p-4\">\n                      <CRow className=\"justify-content-center\">\n\n                        {errorMessage &&\n                          <CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                            color=\"danger\"\n                            // closeButton\n                            show={visible}\n                            // closeButton\n                            onShowChange={setVisible}\n                          >\n      {     Object.keys(errorMessage).map((item, i) => (\n        \n        <>{errorMessage[item]}<br/></>  \n           \n                     \n               \n         ))}\n                            {/* {errorMessage && errorMessage.map((item, i) => (\n\n                              <>{errorMessage[i]}<br /></>\n\n                            ))} */}\n                          </CAlert>}\n\n                        {succesAdd &&\n\n                          <CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                            color=\"success\"\n                            show={visible}\n                            // closeButton\n                            onShowChange={setVisible}\n                          // closeButton\n                          >\n                            {succesAdd}\n                          </CAlert>}\n\n                        <CCol md=\"6\" lg=\"6\" xl=\"6\" xs=\"12\" sm=\"12\" >\n                          {<CButton color=\"success\" block type='submit'>\n                            {t('Save')}\n                            {loading && <>{' '}<i className=\"fa fa-spinner fa-spin\" ></i></>} </CButton>}\n                        </CCol>\n\n                      </CRow>\n                    </CCardFooter>\n                  </CCard>\n\n\n\n                </CCardBody>\n\n              </CForm>\n            </CCol>\n          </CRow>\n\n        </CCard>\n\n\n\n\n\n\n\n      </CContainer>\n    </div>\n  )\n}\n\nexport default AddNewPriority\n"],"sourceRoot":""}