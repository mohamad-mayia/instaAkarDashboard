{"version":3,"sources":["views/TicketPriorities/Priorities.js"],"names":["Priorities","history","useHistory","useTranslation","i18n","useState","small","setSmall","large","data","setData","refresh","setRefresh","setErrorMessage","currentPage","setSuccessAdd","pageStatus","setPageStatus","tokenString","localStorage","getItem","userToken","JSON","parse","setAmount","setCompany","setDept","setExtNumber","useEffect","a","e","fetch","global","apiUrl","method","headers","Authorization","Accept","responsee","status","json","response","console","log","success","payload","activeUser","id","setActiveUser","filter","item","message","removeItem","clear","push","fetchPriorities","setCharge","setNoCharge","itemToDelete","setItemToDelete","handleDelete","document","getElementById","style","opacity","xl","className","md","lg","language","color","onClick","items","fields","hover","striped","pagination","sorter","itemsPerPage","columnFilter","scopedSlots","backgroundColor","time_to_resolve","slice","handleShowModal","name_ar","name_en","company_id","company_name","created_at","show","onClose","size","closeButton"],"mappings":"gOAqYeA,UAlWI,WACjB,IAAMC,EAAUC,cAChB,EAAkBC,cAAlB,mBAAUC,GAAV,WAEA,EAA0BC,oBAAS,GAAnC,mBACA,GADA,UAC0BA,oBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA0BF,oBAAS,GAAnC,mBAAOG,EAAP,KACC,GADD,KAC6BH,oBAAS,IAArC,mBACD,GADC,UACoBA,mBAAS,KAA9B,mBAAOI,EAAP,KAAYC,EAAZ,KACA,EAA8BL,oBAAS,GAAvC,mBAAOM,EAAP,KAAgBC,EAAhB,KACA,EAAwCP,qBAAxC,mBAAqBQ,GAArB,WACA,EAAsCR,mBAAS,GAA/C,mBAAOS,EAAP,KACA,GADA,KACoCT,sBAApC,mBACA,GADA,UAC+BA,sBAA/B,mBAAgBU,GAAhB,WACA,EAA0BV,mBAAS,IAAnC,mBACA,GADA,UACiCA,mBAAS,IAA1C,mBAAOW,EAAP,KAAkBC,EAAlB,KACMC,EAAcC,aAAaC,QAAQ,SACnCC,EAAYC,KAAKC,MAAML,GAC7B,EAAwBb,mBAAS,IAAjC,mBAAamB,GAAb,WACA,GAA8BnB,mBAAS,IAAvC,qBACD,IADC,YAC8BA,mBAAS,KAAxC,qBACD,IADC,YACyBA,mBAAS,KAAnC,qBAAcoB,IAAd,aACA,GAAsBpB,mBAAS,IAA/B,qBACA,IADA,YACoBA,mBAAS,KAA7B,qBAAWqB,IAAX,aACA,GAA8BrB,mBAAS,IAAvC,qBAAgBsB,IAAhB,aACA,GAAsCtB,mBAAS,IAA/C,iCACEuB,oBAAS,sBAAC,sBAAAC,EAAA,sFAAAA,EAAA,MACc,WAAMC,GAAN,iBAAAD,EAAA,+EAEIE,MAAM,GAAD,OACxBC,EAAOC,OADiB,sCAE3B,CACEC,OAAQ,MACRC,QAAS,CACPC,cAAe,UAAYf,EAC3BgB,OAAQ,sBARM,cAaC,MAXfC,EAFc,QAaPC,QACX7B,EAAQ,IAdU,SAgBG4B,EAAUE,OAhBb,OAgBdC,EAhBc,OAmBpBC,QAAQC,IAAI,OAAOF,GAClBA,EAASG,UACXlC,EAAQ+B,EAASI,SAEfC,GAAWC,IAAIC,GAAcP,EAASI,QAAQI,QAAO,SAAAC,GAAI,OAAEA,EAAKH,IAAID,GAAWC,MAAI,KAGjFN,EAASU,SAA2B,oBAAlBV,EAASU,UAC9BhC,aAAaiC,WAAW,SACxBjC,aAAakC,QAEfpD,EAAQqD,KAAK,WA9BS,kDAkCpBZ,QAAQC,IAAR,MAlCoB,0DADd,sDA2CRY,GA3CQ,2CA4CR,CAACzC,EAAYH,IAIhB,OAAiCN,mBAAS,IAA1C,qBAAOyC,GAAP,MAAkBE,GAAlB,MACA,GAAwB3C,mBAAS,IAAjC,qBAAamD,IAAb,aACD,GAA4BnD,oBAAS,GAArC,qBAAeoD,IAAf,aAsBA,GAAqCpD,mBAAS,IAA9C,qBAAOqD,GAAP,MAAoBC,GAApB,MAKMC,GAAY,uCAAC,8BAAA/B,EAAA,6DACjBhB,EAAgB,IAChBE,EAAc,IACd8C,SAASC,eAAe,QAAQC,MAAMC,QAAQ,IAH7B,kBAMOjC,MAAM,GAAD,OACxBC,EAAOC,OADiB,mCACgByB,GAAaX,IACxD,CACEb,OAAQ,SACRC,QAAS,CACPC,cAAe,UAAYf,EAE3BgB,OAAQ,sBAbG,cAMXC,EANW,gBAmBMA,EAAUE,OAnBhB,OAmBXC,EAnBW,OAoBjBC,QAAQC,IAAI,WAAWF,GACvBC,QAAQC,IAAIF,GACS,GAAlBA,EAASG,SAAgBH,EAASI,UACnCtC,GAAUD,GACVuD,SAASC,eAAe,QAAQC,MAAMC,QAAQ,EAE/CpD,GAAYD,IA1BI,kDAkCjB+B,QAAQC,IAAR,MAlCiB,QAqCnBkB,SAASC,eAAe,QAAQC,MAAMC,QAAQ,EArC3B,0DAAD,qDA+DhB,OAEE,eAAC,KAAD,WACe,GAAZhD,GACA,cAAC,IAAD,CAAMiD,GAAI,GAAV,SACA,eAAC,IAAD,WACE,cAAC,IAAD,UACA,eAAC,KAAD,CAAMC,UAAU,cAAhB,UACA,cAAC,IAAD,CAAMC,GAAG,IAAIC,GAAG,IAAIH,GAAG,IAAIC,UAAU,iGAArC,SACkB,MAAjB9D,EAAKiE,SAAmB,yDAAc,eAGvC,cAAC,IAAD,CAAMF,GAAG,IAAIC,GAAG,IAAIH,GAAG,IAAIC,UAAU,wBAArC,SAEC,cAAC,IAAD,CAASI,MAAM,UAAWJ,UAAU,mDACrCK,QAAS,kBAAItE,EAAQqD,KAAK,+BADzB,SAEmB,MAAjBlD,EAAKiE,SAAL,iIAQH,eAAC,IAAD,CAAWH,UAAU,aAArB,UAEA,cAAC,KAAD,IAMDzD,EAAO,cAAC,IAAD,CACJ+D,MAAO/D,EACPgE,OAAQ,CAAC,KAAK,UAAU,UAAU,QAAQ,kBAAmB,kBAAmB,WAChFC,OAAK,EACLC,SAAO,EACPC,YAAU,EAEVC,QAAM,EACjBC,aAAc,GACbC,cAAY,EAGFC,YAAe,CACd,MACA,SAAC9B,GAAD,OACE,+BACD,sBAAMgB,UAAU,SAASH,MAAO,CAACkB,gBAAgB/B,EAAKoB,SAAgBpB,EAAKoB,UAGzE,gBACA,SAACpB,GAAD,OACE,6BACAA,EAAKgC,gBAAgBC,MAAM,EAAE,MAG/B,QACA,SAACjC,GAAD,OACE,+BACA,cAAC,IAAD,CAAQgB,UAAU,qBAAqBI,MAAM,SACzCC,QAAS,kBAhIR,SAACrB,GACrB3C,GAAUC,GACVmD,GAAgBT,GA8HiBkC,CAAgBlC,IADlC,SAEwB,MAAjB9C,EAAKiE,SAAmB,qBAAQ,WACpC,uBACC,cAAC,IAAD,CAAQH,UAAU,sBAAsBI,MAAM,OAC7CC,QAAS,kBAAItE,EAAQqD,KAAR,6BAAmCJ,EAAKH,MADtD,SAEkB,MAAjB3C,EAAKiE,SAAmB,uCAAgB,sBASvD,aAOa,GAAZrD,GAAe8B,IACf,cAAC,IAAD,CAAMmB,GAAI,GAAV,SACA,eAAC,IAAD,WACE,cAAC,IAAD,UACA,eAAC,KAAD,CAAMC,UAAU,qCAAhB,UAKE,cAAC,IAAD,CAAMC,GAAG,IAAIC,GAAG,IAAIH,GAAG,IAAIC,UAAU,iGAArC,SACiB,MAAjB9D,EAAKiE,SAAmBvB,GAAWuC,QAAUvC,GAAWwC,UAExD,eAAC,IAAD,CAAMnB,GAAG,IAAIC,GAAG,IAAIH,GAAG,IAAIC,UAAU,0BAArC,UACA,cAAC,IAAD,CAASI,MAAM,OAAQJ,UAAU,mDAClCK,QAAS,kBAAItE,EAAQqD,KAAR,8BAAoCR,GAAWC,MAD3D,SACqF,MAAjB3C,EAAKiE,SAAL,4CAE9D,cAAC,IAAD,CAASC,MAAM,UAAWJ,UAAU,kDAC3CK,QAAS,kBApLlBvB,GAAc,IACd/B,EAAc,GACdO,EAAU,IACVgC,GAAU,IACV/B,GAAW,IACXC,GAAQ,IACRC,GAAa,SACb8B,IAAY,IA4KI,SACuC,MAAjBrD,EAAKiE,SAAL,4CAO9B,cAAC,IAAD,CAAWH,UAAU,GAArB,SAIA,eAAC,KAAD,WACE,cAAC,IAAD,CAAMC,GAAG,KAAT,SAAc,iCAA0B,MAAjB/D,EAAKiE,SAAL,0GAC7B,cAAC,IAAD,CAAMD,GAAI,EAAV,SACQ,uBAAOF,UAAU,kCAAjB,SACE,kCACS,+BACC,oCACA,6BAAI,iCAASpB,GAAWC,UAE1B,+BACE,6BAAsB,MAAjB3C,EAAKiE,SAAL,yGACL,6BAAI,iCAASvB,GAAWwC,eAE1B,+BACE,6BAAsB,MAAjBlF,EAAKiE,SAAL,sFACL,6BAAI,iCAASvB,GAAWuC,sBAQpC,cAAC,IAAD,CAAMjB,GAAI,EAAV,SACA,uBAAOF,UAAU,kCAAjB,SACE,kCAEQ,+BACE,8BAAK9D,EAAKiE,SAAL,gBACL,6BAAI,iCAASvB,GAAWyC,kBAG1B,+BACE,6BAAsB,MAAjBnF,EAAKiE,SAAL,mDACL,6BAAI,iCAASvB,GAAW0C,oBAE1B,+BACE,6BAAsB,MAAjBpF,EAAKiE,SAAL,2FACL,6BAAI,uCAAUvB,GAAW2C,YAAY3C,GAAW2C,WAAWN,MAAM,EAAE,6BAiBtF,eAAC,KAAD,CACOO,KAAMpF,EACNqF,QAAS,kBAAMpF,GAAUD,IACzBsF,KAAK,KACLtB,MAAM,SAJb,UAMO,cAAC,KAAD,CAAcuB,aAAW,EAAzB,SACE,cAAC,KAAD,UAA+B,MAAjBzF,EAAKiE,SAAmB,0DAAe,sBAEvD,cAAC,KAAD,UACkB,MAAjBjE,EAAKiE,SAAL,8KAA6DX,GAAa2B,QAA1E,2DACgD3B,GAAa4B,QAD7D,OAGD,eAAC,KAAD,WACE,cAAC,IAAD,CAAShB,MAAM,SAASC,QAAS,kBAAKX,MAAtC,SAAwE,MAAjBxD,EAAKiE,SAAmB,qBAAQ,WAAoB,IAC3G,cAAC,IAAD,CAASC,MAAM,YAAYC,QAAS,kBAAMhE,GAAUD,IAApD,SAA8E,MAAjBF,EAAKiE,SAAmB,iCAAU,sB","file":"static/js/95.e5206f44.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CPagination,\n  CButton,\n  CForm,\n  CModal,\n  CModalBody,\n  CModalFooter,\n  CModalHeader,\n  CModalTitle,\n  CFormGroup, \nCLabel,\nCSelect,\nCInput,\nCInputGroup,\nCInputGroupPrepend,\nCInputGroupText,\nCCardFooter\n} from '@coreui/react'\nimport {CAlert} from '@coreui/react'\nimport '../../globalVar'\nimport './Priorities.scss'\n\nimport { useTranslation } from 'react-i18next';\n\n\n\nconst Priorities = () => {\n  const history = useHistory()\n  const [t, i18n] = useTranslation();\n\n  const [modal, setModal] = useState(true)\n  const [small, setSmall] = useState(false)\n  const [large, setLarge] = useState(false)\n   const [danger, setDanger] = useState(false)\n  const [data,setData]=useState('')\n  const [refresh, setRefresh] = useState(false)\n  const [errorMessage, setErrorMessage] = useState();\n  const [currentPage, setCurrentPage] = useState(1)\n  const [totalPages, setTotalPages] = useState()\n  const[succesAdd,setSuccessAdd]=useState()\n  const[loading,setLoading]=useState('')\n  const [pageStatus,setPageStatus]=useState(0)\n  const tokenString = localStorage.getItem(\"token\");\n  const userToken = JSON.parse(tokenString);\n  const[amount,setAmount]=useState('')\n  const [visible, setVisible] = useState(10)\n const [companies,setCompanies]=useState('')\nconst[company,setCompany]=useState('')\nconst[depts,setDepts]=useState([])\nconst[dept,setDept]=useState('')\nconst[extNumber,setExtNumber]=useState('')\nconst[activeCompany,setActiveCompany]=useState('')\n  useEffect(async()=>{\n    const fetchPriorities=async(e)=>{\n    try {\n      const responsee = await fetch(\n        `${global.apiUrl}/super/ticketPriorities?paginate=0`,\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + userToken,\n            Accept: \"application/json\",\n          },\n\n        }\n      );\n      if(responsee.status==204){\n        setData([])\n      }\n      const response = await responsee.json();\n      \n      // console.log('response',response);\n      console.log('faqs',response);\n    if(response.success){\n     setData(response.payload)\n    //  setTotalPages(response.payload.last_page)\n    if(activeUser.id){setActiveUser(response.payload.filter(item=>item.id==activeUser.id)[0])}\n  \n    }\n      if(response.message&&response.message==\"Unauthenticated.\"){\n      localStorage.removeItem(\"token\");\n      localStorage.clear()\n   \n    history.push(\"/login\");\n      }\n     \n    } catch (err) {\n      console.log(err);\n     \n    }\n\n    \n    \n    }\n  \n    fetchPriorities()\n  },[currentPage,refresh])\n\n  \n  \n const [activeUser,setActiveUser]=useState('')\n const[charge,setCharge]=useState([])\nconst[nocharge,setNoCharge]=useState(false)\n const handleShow=(item)=>{\n   setActiveUser(item)\n  //  getUser(item.id)\n  //  setExtNumber(item.extension_number?item.extension_number.slice(4,7):'')\n   setPageStatus(1)\n }\n\n const handleBack=(item)=>{\n  setActiveUser('')\n  setPageStatus(0)\n  setAmount('')\n  setCharge([])\n  setCompany('')\n  setDept('')\n  setExtNumber('')\n  setNoCharge(false)\n}\n\n\n\n\nconst [itemToDelete,setItemToDelete]=useState('')\nconst handleShowModal=(item)=>{\n  setSmall(!large)\n  setItemToDelete(item)\n}\nconst handleDelete=async()=>{\n  setErrorMessage('')\n  setSuccessAdd('')\n  document.getElementById('root').style.opacity=0.75;\n\ntry {\n  const responsee = await fetch(\n    `${global.apiUrl}/super/ticketPriorities/${itemToDelete.id}`,\n    {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \" + userToken,\n       \n        Accept: \"application/json\",\n      },\n \n  \n    }\n  );\n  const response = await responsee.json();\n  console.log('response',response);\n  console.log(response);\n  if(response.success==true&& response.payload){\n    setSmall(!small)\n    document.getElementById('root').style.opacity=1;\n   \n   setRefresh(!refresh)\n  \n  }\n  // else{\n  // setErrorMessage(response.errors)\n  // }\n \n} catch (err) {\n  console.log(err);\n \n}\ndocument.getElementById('root').style.opacity=1;\n\n}\nconst handleCompany=(val)=>{\n  setCompany(val)\n  setDept('')\n  if(val==''){\n    setDepts('')\n  }\n  else{\n    setDepts(companies.filter(item=>item.id==val)[0].departments)\n  }\n\n}\n\nconst handleActiveCompany=(val)=>{\n  setActiveCompany(val)\n \n  if(val==''){\n    setData('')\n  }\n  else{\n    setData(companies.filter(item=>item.id==val)[0].departments)\n  }\n\n}\n  return (\n    \n    <CRow>\n      {pageStatus==0&&\n       <CCol xl={12}>\n       <CCard>\n         <CCardHeader>\n         <CRow className=\" row-gap-15\">\n         <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n         {i18n.language == 'ar' ? \"الأولويات\" : \"Priorities\"}\n              </CCol>\n        \n         <CCol md=\"6\" lg=\"6\" xl=\"6\" className='row-gap-15 col-gap-15'>\n          \n          <CButton color=\"success\"  className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n         onClick={()=>history.push('/Priorities/AddNewPriority')} >\n           {i18n.language == 'ar' ? `إضافة أولوية جديدة` : `Add New Priority`}\n                </CButton>\n             \n          </CCol>\n\n         </CRow>\n           \n         </CCardHeader>\n         <CCardBody className='usersTabel'>\n\n         <CRow >\n       \n\n                      </CRow>\n\n\n      { data?  <CDataTable\n           items={data}\n           fields={['id','name_en','name_ar','color','time_to_resolve' ,'days_to_resolve' ,'actions']}\n           hover\n           striped\n           pagination\n        \n           sorter\nitemsPerPage={12}\n columnFilter\n           // clickableRows\n           // onRowClick={(item) => history.push(`/users/${item.id}`)}\n           scopedSlots = {{\n            'color':\n            (item)=>(\n              <td>\n             <span className='colDiv' style={{backgroundColor:item.color}}></span>{item.color}\n              </td>\n            ),\n               'time_to_resolve':\n               (item)=>(\n                 <td>\n                {item.time_to_resolve.slice(0,5)}\n                 </td>\n               ),\n               'actions':\n               (item)=>(\n                 <td>\n                 <CBadge className=\"p-1 m-1 badg-click\" color=\"danger\"\n                     onClick={() =>handleShowModal(item) }\n                      >{i18n.language == 'ar' ? \"حذف\" : \"Delete\"}</CBadge>\n                    <br/>\n                     <CBadge className=\"p-1  m-1 badg-click\" color=\"info\" \n                      onClick={()=>history.push(`/Priorities/Update/${item.id}`)}  >\n                     {i18n.language == 'ar' ? \"تعديل .....\" : \"Update....\"}</CBadge> \n                  \n                 </td>\n               ),\n\n           }}\n         />\n        :\n        \n       null}\n\n         </CCardBody>\n       </CCard>\n     </CCol>\n      }\n      {\n        pageStatus==1&&activeUser&&\n        <CCol xl={12}>\n        <CCard>\n          <CCardHeader>\n          <CRow className=\"justify-content-center row-gap-15 \">\n\n\n        \n\n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n           {i18n.language == 'ar' ? activeUser.name_ar : activeUser.name_en}\n            </CCol>\n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\" row-gap-15 col-gap-15 \">\n            <CButton color=\"info\"  className='col-lg-4  col-md-4 col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>history.push(`/Departments/Update/${activeUser.id}`)} >{i18n.language == 'ar' ? `تعديل` : `Update`}\n                  </CButton>\n                  <CButton color=\"success\"  className='col-lg-4  col-md-4col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>handleBack()} >{i18n.language == 'ar' ? `رجوع` : `Back`}\n                  </CButton>\n         \n            </CCol>\n            </CRow>\n      \n          </CCardHeader>\n          <CCardBody className=''>\n     \n       \n         \n          <CRow>\n            <CCol md='12'><strong>{i18n.language == 'ar' ? `معلومات القسم` : `Department Informations`}</strong></CCol>\n      <CCol lg={6}>\n              <table className=\"table table-striped table-hover\">\n                <tbody>\n                         <tr >\n                          <td>ID</td>\n                          <td><strong>{activeUser.id}</strong></td>\n                        </tr>\n                        <tr >\n                          <td>{i18n.language == 'ar' ? `الاسم الانكليزي` : `English Name`}</td>\n                          <td><strong>{activeUser.name_en}</strong></td>\n                        </tr>\n                        <tr >\n                          <td>{i18n.language == 'ar' ? `الاسم العربي` : `Arabic Name`}</td>\n                          <td><strong>{activeUser.name_ar}</strong></td>\n                        </tr>\n                     \n\n                  \n                </tbody>\n              </table>\n              </CCol>\n              <CCol lg={6}>\n              <table className=\"table table-striped table-hover\">\n                <tbody>\n             \n                        <tr >\n                          <td>{i18n.language == 'ar' ? `Company Id` : `Company Id`}</td>\n                          <td><strong>{activeUser.company_id}</strong></td>\n                        </tr>\n                        \n                        <tr >\n                          <td>{i18n.language == 'ar' ? `الشركة` : `Company`}</td>\n                          <td><strong>{activeUser.company_name}</strong></td>\n                        </tr>\n                        <tr >\n                          <td>{i18n.language == 'ar' ? `تاريخ الانشاء` : `Created At`}</td>\n                          <td><strong> {activeUser.created_at&&activeUser.created_at.slice(0,10)}</strong></td>\n                        </tr>\n                        \n                      \n                        \n                </tbody>\n              </table>\n              </CCol>\n    </CRow>  \n\n\n          </CCardBody>\n        </CCard>\n      </CCol>\n\n\n      }\n       <CModal \n              show={small} \n              onClose={() => setSmall(!small)}\n              size=\"sm\"\n              color='danger'\n            >\n              <CModalHeader closeButton>\n                <CModalTitle>{i18n.language == 'ar' ? \"حذف أولوية\" : \"Delete Priority\"}</CModalTitle>\n              </CModalHeader>\n              <CModalBody>\n              {i18n.language == 'ar' ? `هل انت متأكد أنك تريد حذف أولوية (${itemToDelete.name_ar})` \n              : `Are you sure you want to delete a priority (${itemToDelete.name_en})`}\n              </CModalBody>\n              <CModalFooter>\n                <CButton color=\"danger\" onClick={() =>handleDelete()}>{i18n.language == 'ar' ? \"حذف\" : \"Delete\"}</CButton>{' '}\n                <CButton color=\"secondary\" onClick={() => setSmall(!small)}>{i18n.language == 'ar' ? \"الغاء\" : \"Cancel\"}</CButton>\n              </CModalFooter>\n            </CModal>\n     \n    </CRow>\n  )\n}\n\nexport default Priorities\n"],"sourceRoot":""}