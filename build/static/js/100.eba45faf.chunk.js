(this.webpackJsonpinstaakar=this.webpackJsonpinstaakar||[]).push([[100],{1123:function(e,c,s){"use strict";s.r(c),function(e){var t=s(175),a=s(45),n=s(121),l=s.n(n),r=s(174),o=s(659),j=s(1),d=s(658),i=(s(661),s(666)),b=s(663),m=(s(1124),s(14)),x=(s(660),s(17));c.default=function(){var c=Object(m.g)(),s=Object(j.useState)(),n=Object(o.a)(s,2),h=n[0],O=n[1],u=Object(j.useState)(""),p=Object(o.a)(u,2),f=p[0],g=p[1],w=Object(j.useState)(""),N=Object(o.a)(w,2),_=N[0],k=N[1],y=Object(j.useState)(),S=Object(o.a)(y,2),v=S[0],C=S[1],P=Object(j.useState)(),V=Object(o.a)(P,2),F=V[0],X=V[1],Y=Object(j.useState)(),z=Object(o.a)(Y,2),A=z[0],U=z[1],J=Object(j.useState)(""),B=Object(o.a)(J,2),D=B[0],I=B[1],q=localStorage.getItem("token"),E=JSON.parse(q),T=localStorage.getItem("user_id"),L=JSON.parse(T),M=Object(j.useState)(0),G=Object(o.a)(M,2),H=G[0],K=G[1],Q=Object(j.useState)({first_name:"",middle_name:"",last_name:"",phone:"",address:"",postal_code:""}),R=Object(o.a)(Q,2),W=R[0],Z=R[1],$=W.first_name,ee=W.middle_name,ce=W.last_name,se=(W.phone,W.address),te=W.postal_code,ae=Object(j.useState)({old_password:"",new_password:"",new_password_confirmation:""}),ne=Object(o.a)(ae,2),le=ne[0],re=ne[1],oe=Object(j.useState)(""),je=Object(o.a)(oe,2),de=je[0],ie=je[1],be=Object(j.useState)(""),me=Object(o.a)(be,2),xe=me[0],he=me[1],Oe=Object(j.useState)(""),ue=Object(o.a)(Oe,2),pe=ue[0],fe=ue[1],ge=le.old_password,we=le.new_password,Ne=le.new_password_confirmation;Object(j.useEffect)(Object(r.a)(l.a.mark((function s(){return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:(function(){var s=Object(r.a)(l.a.mark((function s(t){var a,n;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,fetch("".concat(e.apiUrl,"/users/profile?user_id=").concat(L),{method:"GET",headers:{Authorization:"Bearer "+E,Accept:"application/json"}});case 3:return a=s.sent,s.next=6,a.json();case 6:n=s.sent,console.log(n),"Profile retrieved successfully!"==n.message&&g(n.payload),n.message&&"Unauthorized or invalid token!"==n.message&&(localStorage.removeItem("token"),localStorage.clear(),c.push("/login")),s.next=15;break;case 12:s.prev=12,s.t0=s.catch(0),console.log(s.t0);case 15:case"end":return s.stop()}}),s,null,[[0,12]])})));return function(e){return s.apply(this,arguments)}})()();case 2:case"end":return s.stop()}}),s)}))),[_]);var _e=function(e){Z(Object(a.a)(Object(a.a)({},W),{},Object(t.a)({},e.target.name,e.target.value))),C(""),U("")},ke=function(e){re(Object(a.a)(Object(a.a)({},le),{},Object(t.a)({},e.target.name,e.target.value))),X(""),ie(""),he("")},ye=function(){var c=Object(r.a)(l.a.mark((function c(s){var t,a,n;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),I(!0),C(""),U(""),t=new FormData,$&&t.append("first_name",$),ee&&t.append("middle_name",ee),ce&&t.append("last_name",ce),se&&t.append("address",se),te&&t.append("postal_code",te),h&&t.append("phone",h),c.prev=11,c.next=14,fetch("".concat(e.apiUrl,"/users/updateProfile"),{method:"POST",headers:{Authorization:"Bearer "+E,Accept:"application/json"},body:t});case 14:return a=c.sent,c.next=17,a.json();case 17:n=c.sent,console.log("response",n),console.log(n),n.message&&"Profile updated successfully!"==n.message?(U("Profile updated successfully!"),k(!_)):C(n.errors),c.next=26;break;case 23:c.prev=23,c.t0=c.catch(11),console.log(c.t0);case 26:I(!1);case 27:case"end":return c.stop()}}),c,null,[[11,23]])})));return function(e){return c.apply(this,arguments)}}(),Se=function(){var s=Object(r.a)(l.a.mark((function s(t){var a,n,r;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.preventDefault(),fe(!0),ie(""),he(""),we===Ne){s.next=8;break}X(!0),s.next=27;break;case 8:return a=new FormData,ge&&a.append("old_password",ge),we&&a.append("new_password",we),Ne&&a.append("new_password_confirmation",Ne),s.prev=12,s.next=15,fetch("".concat(e.apiUrl,"/authentication/changePassword"),{method:"POST",headers:{Authorization:"Bearer "+E,Accept:"application/json"},body:a});case 15:return n=s.sent,s.next=18,n.json();case 18:r=s.sent,console.log("response",r),console.log(r),r.message&&"Password changed successfully!"==r.message?(he("Password changed successfully"),k(!_)):r.message&&"Unauthorized or invalid token!"==r.message?(localStorage.removeItem("token"),localStorage.clear(),c.push("/login")):ie(r.errors),s.next=27;break;case 24:s.prev=24,s.t0=s.catch(12),console.log(s.t0);case 27:fe(!1);case 28:case"end":return s.stop()}}),s,null,[[12,24]])})));return function(e){return s.apply(this,arguments)}}();return console.log("adminregister",W),console.log("adminregister",h),Object(x.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center register-cont",children:Object(x.jsxs)(d.w,{children:[0==H&&Object(x.jsx)(x.Fragment,{children:f&&Object(x.jsxs)(d.j,{children:[Object(x.jsx)(d.n,{children:Object(x.jsxs)(d.wb,{className:"justify-content-center row-gap-15 ",children:[Object(x.jsx)(d.u,{md:"6",lg:"6",xl:"6",className:"justify-content-center align-self-center align-items-center place-items-center text-capitalize",children:f.first_name+" "+f.last_name}),Object(x.jsxs)(d.u,{md:"6",lg:"6",xl:"6",className:"justify-content-center row-gap-15 col-gap-15 ",children:[Object(x.jsx)(d.f,{color:"success",className:"col-lg-6  col-md-6 col-sm-12 col-xs-12 ",onClick:function(){return K(2)},children:"Change Password"}),Object(x.jsx)(d.f,{color:"success",className:"col-lg-6  col-md-6 col-sm-12 col-xs-12 ",onClick:function(){return K(1)},children:"Update Profile"})]})]})}),Object(x.jsx)(d.k,{children:Object(x.jsxs)(d.wb,{children:[Object(x.jsx)(d.u,{lg:6,children:Object(x.jsx)("table",{className:"table table-striped table-hover",children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"First Name"}),Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:f.first_name})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Middle Name"}),Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:f.middle_name})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Last Name"}),Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:f.last_name})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Address"}),Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:f.address})})]})]})})}),Object(x.jsx)(d.u,{lg:6,children:Object(x.jsx)("table",{className:"table table-striped table-hover",children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Email"}),Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:f.email})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Phone"}),Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:f.phone})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Postal Code"}),Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:f.postal_code})})]})]})})})]})})]})}),f&&1==H&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(d.j,{className:"",children:Object(x.jsxs)(d.J,{onSubmit:function(e){ye(e)},children:[Object(x.jsx)(d.n,{children:Object(x.jsxs)(d.wb,{className:"justify-content-center row-gap-15",children:[Object(x.jsxs)(d.u,{md:"6",lg:"6",xl:"6",className:"justify-content-center align-self-center align-items-center place-items-center text-capitalize",children:["Update "," "+f.first_name+" ","Profile"]}),Object(x.jsx)(d.u,{md:"6",lg:"6",xl:"6",children:Object(x.jsx)(d.f,{color:"success",className:"col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn",onClick:function(){return K(0)},children:"Back"})})]})}),Object(x.jsx)(d.k,{className:"p-4",children:Object(x.jsxs)(d.wb,{className:"justify-content-center",children:[Object(x.jsxs)(d.u,{md:"6",lg:"6",xl:"6",children:[Object(x.jsxs)(d.V,{className:"mb-3",children:[Object(x.jsx)(d.X,{children:Object(x.jsx)(d.Y,{children:Object(x.jsx)(b.a,{name:"cil-user"})})}),Object(x.jsx)(d.S,{onChange:_e,defaultValue:f.first_name,name:"first_name",type:"text",placeholder:"First Name"})]}),Object(x.jsxs)(d.V,{className:"mb-3",children:[Object(x.jsx)(d.X,{children:Object(x.jsx)(d.Y,{children:Object(x.jsx)(b.a,{name:"cil-user"})})}),Object(x.jsx)(d.S,{onChange:_e,defaultValue:f.middle_name,name:"middle_name",type:"text",placeholder:"Middle Name"})]}),Object(x.jsxs)(d.V,{className:"mb-3",children:[Object(x.jsx)(d.X,{children:Object(x.jsx)(d.Y,{children:Object(x.jsx)(b.a,{name:"cil-user"})})}),Object(x.jsx)(d.S,{onChange:_e,name:"last_name",defaultValue:f.last_name,type:"text",placeholder:"Last Name"})]})]}),Object(x.jsxs)(d.u,{md:"6",lg:"6",xl:"6",children:[Object(x.jsxs)(d.V,{className:"mb-3",children:[Object(x.jsx)(d.X,{children:Object(x.jsx)(d.Y,{children:Object(x.jsx)(b.a,{name:"cil-location-pin"})})}),Object(x.jsx)(d.S,{onChange:_e,defaultValue:f.address,name:"address",type:"text",placeholder:"*Address"})]}),Object(x.jsxs)(d.V,{className:"mb-3",children:[Object(x.jsx)(d.X,{children:Object(x.jsx)(d.Y,{children:"P"})}),Object(x.jsx)(d.S,{onChange:_e,defaultValue:f.postal_code,name:"postal_code",type:"text",placeholder:"*Postal Code"})]}),Object(x.jsxs)(d.V,{className:"mb-3",children:[Object(x.jsx)(d.X,{children:Object(x.jsxs)(d.Y,{children:[" ",Object(x.jsx)(b.a,{name:"cil-phone"})]})}),Object(x.jsx)(i.a,{className:"form-control",name:"phone",placeholder:"Phone Number",value:f.phone,onChange:O})]})]})]})}),Object(x.jsx)(d.l,{className:"p-4",children:Object(x.jsxs)(d.wb,{className:"justify-content-center",children:[v&&Object(x.jsx)(d.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"danger",children:Object.keys(v).map((function(e,c){return Object(x.jsxs)(x.Fragment,{children:[v[e],Object(x.jsx)("br",{})]})}))}),A&&Object(x.jsx)(d.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"success",children:A}),Object(x.jsx)(d.u,{md:"6",lg:"6",xl:"6",xs:"12",sm:"12",children:Object(x.jsxs)(d.f,{color:"success",block:!0,type:"submit",children:["Save",D&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)("i",{className:"fa fa-spinner fa-spin"})]})," "]})})]})})]})})}),f&&2==H&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(d.j,{className:"",children:Object(x.jsxs)(d.J,{onSubmit:function(e){Se(e)},children:[Object(x.jsx)(d.n,{children:Object(x.jsxs)(d.wb,{className:"justify-content-center row-gap-15",children:[Object(x.jsxs)(d.u,{md:"6",lg:"6",xl:"6",className:"justify-content-center align-self-center align-items-center place-items-center text-capitalize",children:["Change "," "+f.first_name+" ","Password"]}),Object(x.jsx)(d.u,{md:"6",lg:"6",xl:"6",children:Object(x.jsx)(d.f,{color:"success",className:"col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn",onClick:function(){return K(0)},children:"Back"})})]})}),Object(x.jsx)(d.k,{className:"p-4",children:Object(x.jsx)(d.wb,{className:"justify-content-center",children:Object(x.jsxs)(d.u,{md:"6",lg:"6",xl:"6",children:[Object(x.jsxs)(d.V,{className:"mb-3",children:[Object(x.jsx)(d.X,{children:Object(x.jsx)(d.Y,{children:Object(x.jsx)(b.a,{name:"cil-lock-locked"})})}),Object(x.jsx)(d.S,{onChange:ke,name:"old_password",type:"password",placeholder:"Password",required:!0,autoComplete:"new-password"})]}),Object(x.jsxs)(d.V,{className:"mb-3",children:[Object(x.jsx)(d.X,{children:Object(x.jsx)(d.Y,{children:Object(x.jsx)(b.a,{name:"cil-lock-locked"})})}),Object(x.jsx)(d.S,{onChange:ke,name:"new_password",type:"password",placeholder:"New Password",required:!0,autoComplete:"new-password"})]}),Object(x.jsxs)(d.V,{className:"mb-4",children:[Object(x.jsx)(d.X,{children:Object(x.jsx)(d.Y,{children:Object(x.jsx)(b.a,{name:"cil-lock-locked"})})}),Object(x.jsx)(d.S,{onChange:ke,name:"new_password_confirmation",type:"password",placeholder:"Confirm New password",required:!0,autoComplete:"new-password"})]})]})})}),Object(x.jsx)(d.l,{className:"p-4",children:Object(x.jsxs)(d.wb,{className:"justify-content-center",children:[F&&Object(x.jsx)(d.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"danger",children:"Password and confirm password do not match"}),de&&Object(x.jsx)(d.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"danger",children:Object.keys(de).map((function(e,c){return Object(x.jsxs)(x.Fragment,{children:[de[e],Object(x.jsx)("br",{})]})}))}),xe&&Object(x.jsx)(d.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"success",children:xe}),Object(x.jsx)(d.u,{md:"6",lg:"6",xl:"6",xs:"12",sm:"12",children:Object(x.jsxs)(d.f,{color:"success",block:!0,type:"submit",children:["Save",pe&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)("i",{className:"fa fa-spinner fa-spin"})]})," "]})})]})})]})})})]})})}}.call(this,s(73))},1124:function(e,c,s){}}]);
//# sourceMappingURL=100.eba45faf.chunk.js.map