{"version":3,"sources":["views/areas/areaUpdate/areaUpdate.js"],"names":["AreaUpdate","match","useTranslation","t","i18n","history","useHistory","useState","visible","setVisible","refreshTokenHandler","useContext","ProfileContext","refresh","setRefresh","errorMessage","setErrorMessage","succesAdd","setSuccessAdd","loading","setLoading","tokenString","localStorage","getItem","JSON","parse","name_en","name_ar","upData","setUpData","useEffect","a","fetchitems","e","userToken","fetch","global","apiUrl","params","CountryId","method","headers","Authorization","Accept","responsee","json","response","message","temp","payload","filter","item","id","name","en","ar","console","log","handleData","target","value","handleAdd","preventDefault","data","body","stringify","error","errors","language","className","md","lg","xl","color","onClick","goBack","xs","sm","onSubmit","row","htmlFor","required","onChange","placeholder","Object","keys","map","i","Fragment","show","onShowChange","block","type"],"mappings":"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","file":"static/js/50.2c36132a.chunk.js","sourcesContent":["\n\n\nimport React, { useState, useEffect, useContext } from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardFooter,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CPagination,\n  CDataTable,\n  CSelect,\n  CFormText,\n  CTextarea,\n  CFormGroup,\n  CLabel,\n  CSwitch,\n  CInputFile,\n  CLink,\n  CFade,\n  CCollapse,\n  CBadge,\n  CRow\n} from '@coreui/react'\nimport 'react-phone-number-input/style.css'\nimport PhoneInput from 'react-phone-number-input'\nimport CIcon from '@coreui/icons-react'\nimport './areaUpdate.scss'\n\nimport { CAlert } from '@coreui/react'\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from 'react-i18next';\nimport { ProfileContext } from 'src/App'\nimport '../../../globalVar'\n// import { set } from 'core-js/core/dict'\n// import MIN_SAFE_INTEGER from 'core-js/fn/number/min-safe-integer'\nconst AreaUpdate = ({ match }) => {\n  const [t, i18n] = useTranslation();\n  let history = useHistory();\n  const [visible, setVisible] = useState(10)\n  const { refreshTokenHandler } = useContext(ProfileContext)\n  const [fetchedData, setfetchedData] = useState([])\n  const [refresh, setRefresh] = useState('')\n  const [errorMessage, setErrorMessage] = useState();\n  const [data, setData] = useState('')\n  const [succesAdd, setSuccessAdd] = useState()\n  const [loading, setLoading] = useState('')\n  const tokenString = localStorage.getItem(\"token\");\n  const userToken = JSON.parse(tokenString);\n  const [pickedImg, setPickedImg] = useState('')\n  // const userId = localStorage.getItem(\"user_id\");\n  // const user_id = JSON.parse(userId);\n  const [country, setCountry] = useState(\"\")\n  const [upData, setUpData] = useState({\n    name_en: '',\n    name_ar: '',\n  })\n  const { name_en,\n    name_ar,\n\n  } = upData;\n  const handleCountry = async (value) => {\n    setCountry(value)\n    setErrorMessage('')\n    setSuccessAdd('')\n\n  }\n  useEffect(async () => {\n    const fetchitems = async (e) => {\n\n      const userToken = JSON.parse(localStorage.getItem(\"token\"));\n\n      try {\n        const responsee = await fetch(\n          `${global.apiUrl}api/countries?country_id=${match.params.CountryId}`,\n          {\n            method: \"GET\",\n            headers: {\n              Authorization: \"Bearer \" + userToken,\n              Accept: \"application/json\",\n            },\n\n\n          }\n        );\n        const response = await responsee.json();\n        if (response.message && response.message == \"Unauthenticated.\") {\n          return refreshTokenHandler(function () { fetchitems(e) })\n        }\n\n        if (response.message && response.message == \"Success\") {\n          const temp = response.payload.filter(item => item.id == match.params.id)[0]\n          setUpData({ name_en: temp.name.en, name_ar: temp.name.ar, })\n\n\n\n        }\n\n      } catch (err) {\n        console.log(err);\n\n      }\n\n    }\n\n    fetchitems()\n  }, [refresh])\n\n\n\n  const handleData = (e) => {\n    setUpData({ ...upData, [e.target.name]: e.target.value })\n\n    setErrorMessage('')\n    setSuccessAdd('')\n  }\n\n\n\n\n\n\n  const handleAdd = async (e) => {\n    e.preventDefault()\n    setLoading(true)\n    const userToken = JSON.parse(localStorage.getItem(\"token\"));\n    setErrorMessage('')\n    setSuccessAdd('')\n    let data = {\n      name: { ar: name_ar, en: name_en },\n\n    }\n\n\n    try {\n      const responsee = await fetch(\n        `${global.apiUrl}api/areas/${match.params.id}?_method=put`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: \"Bearer \" + userToken,\n            \"Content-Type\": \"application/json\",\n            'Access-Control-Allow-Origin': 'https://localhost:3000',\n            'Access-Control-Allow-Credentials': 'true',\n            Accept: \"application/json\",\n          },\n          body: JSON.stringify(data)\n          ,\n\n        }\n      );\n      const response = await responsee.json();\n      setVisible(10)\n      if (response.message === \"Fail\") {\n        setErrorMessage(response.error);\n        return\n\n      }\n      else if (response.errors) {\n        setErrorMessage(response.errors);\n      }\n      else if (response.message && response.message == \"Unauthenticated.\") {\n        return refreshTokenHandler(function () { handleAdd(e) })\n      }\n\n      if (response.message && response.message == \"Success\") {\n        setSuccessAdd(i18n.language === \"ar\" ? \"تم تعديل منطقة بنجاح\" : \"Area has been updated successfully\")\n        setRefresh(!refresh)\n      }\n\n\n\n    } catch (err) {\n      console.log(err);\n\n    }\n\n    setLoading(false)\n  }\n\n\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center justify-content-center register-cont\">\n\n      <CContainer>\n\n\n        <CCard className=\"\">\n\n\n\n          <CCardHeader>\n            <CRow className=\" row-gap-15\">\n              <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n                <strong>{i18n.language == \"ar\" ? \"تعديل منطقة\" : \"Area Update\"}  </strong>\n              </CCol>\n              <CCol md=\"6\" lg=\"6\" xl=\"6\" className='row-gap-15 col-gap-15'>\n                <CButton color=\"success\" className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n                  onClick={() => history.goBack()} >{t(\"Back\")}\n                </CButton>\n\n              </CCol>\n            </CRow>\n          </CCardHeader>\n\n          <CRow>\n            <CCol xs=\"12\" sm=\"12\" md=\"12\" className=''>\n              <CForm onSubmit={(e) => { handleAdd(e) }}>\n                <CCardBody>\n                  <CCard>\n                    <CCardBody>\n                      <CRow >\n\n\n                        {/* className=\"justify-content-center\" */}\n\n                        <CCol md='12'> <strong>{i18n.language == \"ar\" ? \"معلومات المنطقة\" : \"Area Information\"}</strong></CCol>\n                        {/* <CCol md=\"6\"  >\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <CLabel htmlFor=\"text-input\">   {t(\"Country\")}</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"12\">\n                              <CSelect custom name=\"category_id\"\n                                value={country} required\n                                onChange={(e) => handleCountry(e.target.value)}>\n                                <option value='' >{t(\"Select Country\")}</option>\n\n                                {data.length > 0 && data.map((item) => {\n                                  return (<option value={item.id} key={item.id}>  {item.name[i18n.language]}   </option>)\n                                })}\n\n                              </CSelect>\n                            </CCol>\n                          </CFormGroup>\n                        </CCol> */}\n                        <CCol md=\"6\" lg=\"6\" xl=\"6\">\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <CLabel htmlFor=\"text-input\">{t(`English Name`)}</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"12\">\n\n                              <CInput name=\"name_en\"\n                                required\n                                onChange={handleData}\n                                placeholder={t(`English Name`)}\n                                value={upData.name_en} />\n                            </CCol>\n                          </CFormGroup>\n                        </CCol>\n                        <CCol md=\"6\" lg=\"6\" xl=\"6\">\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <CLabel htmlFor=\"text-input\">{t(`Arabic Name`)}</CLabel>\n                            </CCol>\n                            <CCol xs=\"12\" md=\"12\">\n\n                              <CInput name=\"name_ar\"\n                                required\n                                onChange={handleData}\n                                placeholder={t(`Arabic Name`)}\n                                value={upData.name_ar} />\n                            </CCol>\n                          </CFormGroup>\n                        </CCol>\n\n\n                      </CRow>\n\n\n                    </CCardBody>\n                    <CCardFooter className=\"p-4\">\n                      <CRow className=\"justify-content-center\">\n\n                        {errorMessage && typeof errorMessage === 'object' ? <CAlert color=\"danger\" className='col-lg-12'  >\n                          {Object.keys(errorMessage).map((item, i) => (\n                            <React.Fragment key={i}>{errorMessage[item]}<br /></React.Fragment >\n                          ))}\n                        </CAlert>\n                          :\n                          null}\n                        {errorMessage && typeof errorMessage === 'string' ? <CAlert color=\"danger\" className='col-lg-12'  >{errorMessage} </CAlert> : null}\n\n\n                        {succesAdd &&\n\n                          <CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                            color=\"success\"\n                            show={visible}\n                            // closeButton\n                            onShowChange={setVisible}\n                          // closeButton\n                          >\n                            {succesAdd}\n                          </CAlert>}\n\n                        <CCol md=\"6\" lg=\"6\" xl=\"6\" xs=\"12\" sm=\"12\" >\n                          {<CButton color=\"success\" block type='submit'>\n                            {t(\"Save\")}\n                            {loading && <>{' '}<i className=\"fa fa-spinner fa-spin\" ></i></>} </CButton>}\n                        </CCol>\n\n                      </CRow>\n                    </CCardFooter>\n                  </CCard>\n\n\n\n                </CCardBody>\n\n              </CForm>\n            </CCol>\n          </CRow>\n\n        </CCard>\n\n\n\n\n\n\n\n      </CContainer>\n    </div>\n  )\n}\n\n\n\n\n\n\nexport default AreaUpdate\n"],"sourceRoot":""}