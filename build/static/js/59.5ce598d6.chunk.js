(this.webpackJsonpinstaakar=this.webpackJsonpinstaakar||[]).push([[59],{1153:function(e,t,c){"use strict";c.r(t),function(e){c(175);var n=c(45),r=c(121),s=c.n(r),a=c(174),i=c(659),l=c(1),o=c(658),u=(c(661),c(663),c(1154),c(14)),j=(c(660),c(17));t.default=function(){var t=Object(u.g)(),c=Object(l.useState)(10),r=Object(i.a)(c,2),d=r[0],b=r[1],h=Object(l.useState)(1),p=Object(i.a)(h,2),x=(p[0],p[1],Object(l.useState)()),O=Object(i.a)(x,2),f=(O[0],O[1]),m=Object(l.useState)([]),g=Object(i.a)(m,2),k=g[0],v=g[1],y=Object(l.useState)(""),S=Object(i.a)(y,2),w=(S[0],S[1],Object(l.useState)()),N=Object(i.a)(w,2),C=N[0],F=N[1],A=Object(l.useState)(),I=Object(i.a)(A,2),J=I[0],T=I[1],z=Object(l.useState)(""),P=Object(i.a)(z,2),U=P[0],B=P[1],M=localStorage.getItem("token"),E=JSON.parse(M),G=localStorage.getItem("user_id"),D=(JSON.parse(G),Object(l.useState)(0)),H=Object(i.a)(D,2),_=H[0],q=H[1],K=Object(l.useState)({facebook:"",twitter:"",linkedin:"",instagram:"",email:"",address:"",phone:""}),L=Object(i.a)(K,2),Q=L[0],R=(L[1],Q.facebook,Q.twitter,Q.linkedin,Q.instagram,Q.email,Q.address,Q.phone,Object(l.useState)([])),V=Object(i.a)(R,2),W=V[0],X=V[1],Y=Object(l.useState)("0"),Z=Object(i.a)(Y,2),$=Z[0],ee=Z[1],te=Object(l.useState)([]),ce=Object(i.a)(te,2),ne=ce[0],re=ce[1],se=Object(l.useState)("0"),ae=Object(i.a)(se,2),ie=ae[0],le=ae[1];function oe(e,t){if("function"!==typeof t){var c=t;t=function(e){return e[c]}}return Array.from(e.reduce((function(e,c){var n=t(c);return e.has(n)||e.set(n,c),e}),new Map).values())}Object(l.useEffect)(Object(a.a)(s.a.mark((function c(){return s.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:(function(){var c=Object(a.a)(s.a.mark((function c(n){var r,a,i;return s.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,fetch("".concat(e.apiUrl,"/services/getAllServices"),{method:"GET",headers:{Authorization:"Bearer "+E,Accept:"application/json"}});case 3:return r=c.sent,c.next=6,r.json();case 6:if(a=c.sent,console.log(a),!a){c.next=17;break}return i=[],c.next=12,a.map((function(e,t){i.push({checked:!1,index:t,id:e.service,name:e.name,type:e.type,rate:e.rate,min:e.min,max:e.max,dripfeed:e.dripfeed,refill:e.refill,category:e.category})}));case 12:return c.next=14,f(Math.ceil(a.length/12));case 14:v(i),X(oe(a,"type")),re(oe(a,"category"));case 17:a.message&&"Unauthorized or invalid token!"==a.message&&(localStorage.removeItem("token"),localStorage.clear(),t.push("/login")),c.next=23;break;case 20:c.prev=20,c.t0=c.catch(0),console.log(c.t0);case 23:case"end":return c.stop()}}),c,null,[[0,20]])})));return function(e){return c.apply(this,arguments)}})()();case 2:case"end":return c.stop()}}),c)}))),[]);var ue=function(){var t=Object(a.a)(s.a.mark((function t(c){var n,r,a,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),B(!0),F(""),T(""),n=[],t.next=7,k.filter((function(e){return 1==e.checked})).map((function(e,t){n.push({service:e.id,name:e.name,type:e.type,rate:e.rate,min:e.min,max:e.max,dripfeed:e.dripfeed,refill:e.refill,category:e.category})}));case 7:return t.prev=7,t.next=10,fetch("".concat(e.apiUrl,"/services/storeSelectedServices"),{method:"POST",headers:{Authorization:"Bearer "+E,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({services:n})});case 10:return r=t.sent,t.next=13,r.json();case 13:if(a=t.sent,console.log("response",a),console.log(a),b(10),!a.message||"Services stored successfully!"!=a.message){t.next=23;break}return t.next=20,b(6);case 20:T("Services stored successfully!"),t.next=28;break;case 23:return i=[],t.next=26,Object.keys(a.errors).map((function(e,t){console.log(n[parseInt(a.errors[e][0].split(".")[1])].service,t),i.push({err:"Service ".concat(n[parseInt(a.errors[e][0].split(".")[1])].service+" "+n[parseInt(a.errors[e][0].split(".")[1])].name," Already Stored")})}));case 26:b(10),F(i);case 28:t.next=33;break;case 30:t.prev=30,t.t0=t.catch(7),console.log(t.t0);case 33:B(!1);case 34:case"end":return t.stop()}}),t,null,[[7,30]])})));return function(e){return t.apply(this,arguments)}}(),je=Object(l.useState)(),de=Object(i.a)(je,2),be=(de[0],de[1],function(){var e=Object(a.a)(s.a.mark((function e(t,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(""),e.next=3,v(k.map((function(e){return e.index===c?Object(n.a)(Object(n.a)({},e),{},{checked:t.target.checked}):e})));case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),he=function(){var e=Object(a.a)(s.a.mark((function e(t,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(c),F(""),v("0"==ie&&"0"==$?k.map((function(e){return e.index,Object(n.a)(Object(n.a)({},e),{},{checked:c})})):"0"==ie&&"0"!==$?k.map((function(e){return e.type===$?Object(n.a)(Object(n.a)({},e),{},{checked:c}):{item:e}})):"0"!==ie&&"0"==$?k.map((function(e){return e.category===ie?Object(n.a)(Object(n.a)({},e),{},{checked:c}):Object(n.a)(Object(n.a)({},e),{},{checked:e.checked})})):k.map((function(e){return e.index,Object(n.a)(Object(n.a)({},e),{},{checked:c})})));case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();console.log(C),console.log(k);var pe=["checked","index","id","name","type","rate","min","max","dripfeed","refill","category"];return Object(j.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center register-cont",children:Object(j.jsxs)(o.w,{children:[0==_&&Object(j.jsx)(j.Fragment,{children:k&&Object(j.jsxs)(o.j,{children:[Object(j.jsx)(o.n,{children:Object(j.jsxs)(o.wb,{className:" row-gap-15 ",children:[Object(j.jsx)(o.u,{md:"3",lg:"3",xl:"3",className:"justify-content-center align-self-center align-items-center place-items-center text-capitalize",children:"All Services"}),Object(j.jsx)(o.u,{md:"9",lg:"9",xl:"9",children:Object(j.jsx)(o.f,{color:"success",className:"col-lg-4  col-md-4 col-sm-12 col-xs-12 updatebtn",onClick:function(){return q(1)},children:"view selected"})}),Object(j.jsx)(o.u,{md:"4",lg:"3",xl:"3",children:k&&Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"checkbox",id:"chekall",onChange:function(e){return he(e,e.target.checked)}})," ",Object(j.jsx)("label",{htmlFor:"chekall",children:"Check all"})]})}),Object(j.jsx)(o.u,{md:"4",lg:"4",xl:"4",children:ne.length>0&&Object(j.jsxs)(o.xb,{custom:!0,name:"select",id:"select",value:ie,onChange:function(e){return function(e){le(e.target.value),ee("0")}(e)},children:[Object(j.jsx)("option",{value:"0",children:"All Categories"}),ne.map((function(e){return Object(j.jsx)("option",{value:e.category,children:e.category},e.category)}))]})}),Object(j.jsx)(o.u,{md:"4",lg:"4",xl:"4",children:W.length>0&&Object(j.jsxs)(o.xb,{custom:!0,name:"select",id:"select",value:$,onChange:function(e){return function(e){ee(e.target.value),le("0")}(e)},children:[Object(j.jsx)("option",{value:"0",children:"All Types"}),W.map((function(e){return Object(j.jsx)("option",{value:e.type,children:e.type},e.type)}))]})})]})}),Object(j.jsxs)(o.k,{children:[Object(j.jsx)(o.wb,{}),Object(j.jsx)(o.wb,{className:"servicesTabel",children:k.length>0&&Object(j.jsx)(o.y,{items:"0"==ie&&"0"==$?k:"0"==ie&&"0"!==$?k.filter((function(e){return e.type==$})):"0"!==ie&&"0"==$?k.filter((function(e){return e.category==ie})):k,fields:pe,bordered:!0,striped:!0,sorter:!0,columnFilter:!0,itemsPerPage:12,pagination:!0,scopedSlots:{checked:function(e){return Object(j.jsx)("td",{children:1==e.checked?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("input",{onChange:function(t){return be(t,e.index)},type:"checkbox",checked:e.checked})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("input",{checked:e.checked,onChange:function(t){return be(t,e.index)},type:"checkbox"})})})}}})})]})]})}),k&&1==_&&Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(o.j,{className:"",children:Object(j.jsxs)(o.J,{onSubmit:function(e){ue(e)},children:[Object(j.jsx)(o.n,{children:Object(j.jsxs)(o.wb,{className:" row-gap-15",children:[Object(j.jsxs)(o.u,{md:"6",lg:"6",xl:"6",className:"justify-content-center align-self-center align-items-center place-items-center text-capitalize",children:["Store Selected services ",Object(j.jsxs)("strong",{children:["(",k.filter((function(e){return 1==e.checked})).length,")"]})]}),Object(j.jsx)(o.u,{md:"6",lg:"6",xl:"6",children:Object(j.jsx)(o.f,{color:"success",className:"col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn",onClick:function(){return q(0)},children:"Back"})})]})}),Object(j.jsx)(o.k,{className:"p-4",children:Object(j.jsx)(o.wb,{className:"servicesTabel",children:k&&Object(j.jsx)(o.y,{items:k.filter((function(e){return 1==e.checked})),fields:pe,bordered:!0,striped:!0,itemsPerPage:12,pagination:!0,scopedSlots:{checked:function(e){return Object(j.jsx)("td",{children:e.checked?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("input",{onChange:function(t){return be(t,e.index)},type:"checkbox",checked:!0})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("input",{onChange:function(t){return be(t,e.index)},type:"checkbox"})})})}}})})}),Object(j.jsx)(o.l,{className:"p-4",children:Object(j.jsxs)(o.wb,{className:"justify-content-center",children:[C&&Object(j.jsx)(o.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"danger",show:d,onShowChange:b,children:C.map((function(e){return Object(j.jsxs)(j.Fragment,{children:[e.err,Object(j.jsx)("br",{})]})}))}),J&&Object(j.jsx)(o.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"success",show:d,onShowChange:b,children:J}),Object(j.jsx)(o.u,{md:"6",lg:"6",xl:"6",xs:"12",sm:"12",children:k.filter((function(e){return 1==e.checked})).length>0&&Object(j.jsxs)(o.f,{color:"success",block:!0,type:"submit",children:["Save",U&&Object(j.jsxs)(j.Fragment,{children:[" ",Object(j.jsx)("i",{className:"fa fa-spinner fa-spin"})]})," "]})})]})}),Object(j.jsxs)(o.wb,{children:[Object(j.jsx)(o.u,{md:"12",className:"p-4",children:Object(j.jsxs)(o.a,{className:"col-md-12 ",color:"info",children:["Hint :\xa0 Go to \xa0",Object(j.jsx)(o.db,{className:"alert-link",to:"/Services/StoredServices",children:"Stored Services"}),". \xa0  For More Updates"]})})," "]})]})})})]})})}}.call(this,c(73))},1154:function(e,t,c){},661:function(e,t,c){}}]);
//# sourceMappingURL=59.5ce598d6.chunk.js.map