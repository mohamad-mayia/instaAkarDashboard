{"version":3,"sources":["views/settings/aboutUs/aboutUs.js","views/settings/aboutUs/editor.js"],"names":["AboutUs","props","history","useHistory","useState","visible","setVisible","fetchedData","setfetchedData","refresh","setRefresh","errorMessage","setErrorMessage","succesAdd","setSuccessAdd","loading","setLoading","tokenString","localStorage","getItem","userToken","JSON","parse","userId","pageStatus","setPageStatus","facebook","twitter","linkedin","instagram","email","address","phone","upData","pickedImg","setPickedImg","dataText","setDataText","useEffect","a","e","fetch","global","apiUrl","method","headers","Authorization","Accept","responsee","json","response","console","log","message","payload","about_us","removeItem","clear","push","fetchSettings","handleUpdateProfile","preventDefault","data","FormData","append","body","errors","className","md","lg","xl","color","onClick","src","about_us_photo","dangerouslySetInnerHTML","__html","onSubmit","row","col","xs","accept","custom","id","onChange","target","files","handleImg","htmlFor","variant","name","URL","createObjectURL","show","onShowChange","Object","keys","map","item","i","sm","block","type","ControlledEditor","onEditorStateChange","editorState","setState","draftToHtml","convertToRaw","getCurrentContent","state","EditorState","createWithContent","ContentState","createFromBlockArray","htmlToDraft","this","wrapperClassName","editorClassName","Component"],"mappings":"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","file":"static/js/70.16011e41.chunk.js","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardFooter,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CInputFile,\nCLabel,\nCFormGroup,\n  CRow\n} from '@coreui/react'\nimport 'react-phone-number-input/style.css'\nimport PhoneInput from 'react-phone-number-input'\nimport CIcon from '@coreui/icons-react'\nimport '../../../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport './aboutUs.scss'\nimport {CAlert} from '@coreui/react'\nimport { useHistory } from \"react-router-dom\";\n\nimport '../../../globalVar'\nimport Editor from './editor'\nconst AboutUs = (props) => {\n  let history = useHistory();\n\n  const [visible, setVisible] = useState(10)\n  // const [value, setValue] = useState()\n  const[fetchedData,setfetchedData]=useState('')\n  const[refresh,setRefresh]=useState('')\n  const [errorMessage, setErrorMessage] = useState();\n  \n  const[succesAdd,setSuccessAdd]=useState()\n  const[loading,setLoading]=useState('')\n  const tokenString = localStorage.getItem(\"token\");\n  const userToken = JSON.parse(tokenString);\n  const userId = localStorage.getItem(\"user_id\");\n  const user_id = JSON.parse(userId);\n  const [pageStatus,setPageStatus]=useState(0)\nconst [upData,setUpData]=useState({\n  facebook:'',\ntwitter:'',\nlinkedin:'',\ninstagram:'',\nemail:'',\naddress:'',phone:''\n})\nconst{ facebook,\ntwitter,\nlinkedin,\ninstagram,\nemail,\naddress,phone\n}=upData;\nconst [pickedImg,setPickedImg]=useState('')\nconst[dataText,setDataText]=useState('')\n\nuseEffect(async()=>{\n  const fetchSettings=async(e)=>{\n\n\n  \n  try {\n    const responsee = await fetch(\n      `${global.apiUrl}/settings/viewWebsiteSettings`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + userToken,\n                     // \"Content-Type\": \"application/json\",\n                    //'Access-Control-Allow-Origin': 'https://localhost:3000',\n                    // 'Access-Control-Allow-Credentials': 'true',\n          Accept: \"application/json\",\n        },\n\n    \n      }\n    );\n    const response = await responsee.json();\n    // console.log('response',response);\n    console.log(response);\n  if(response.message== \"Website settings retrieved successfully!\"){\n   setfetchedData(response.payload)\n   setDataText(response.payload.about_us)\n  }\n    if(response.message&&response.message==\"Unauthorized or invalid token!\"){\n    localStorage.removeItem(\"token\");\n    localStorage.clear()\n \n  history.push(\"/login\");\n    }\n   \n  } catch (err) {\n    console.log(err);\n   \n  }\n\n  // setLoading(false)\n  \n  \n  }\n\n  fetchSettings()\n},[refresh])\n\n\n\n\nconst handleData=(e)=>{\n  setUpData({...upData,[e.target.name]:e.target.value})\n\n  setErrorMessage('')\n  setSuccessAdd('')\n}\n\nconst handleUpdateProfile=async(e)=>{\n  e.preventDefault()\n  setLoading(true)\n  \n  setErrorMessage('')\n  setSuccessAdd('')\n\n\n  const data = new FormData();\ndataText&& data.append('about_us',dataText );\npickedImg&& data.append('about_us_photo',pickedImg );\n\n\ntry {\n  const responsee = await fetch(\n    `${global.apiUrl}/settings/updateWebsiteSettings`,\n    {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + userToken,\n                   // \"Content-Type\": \"application/json\",\n                  //'Access-Control-Allow-Origin': 'https://localhost:3000',\n                  // 'Access-Control-Allow-Credentials': 'true',\n        Accept: \"application/json\",\n      },\n      body:data,\n  \n    }\n  );\n  const response = await responsee.json();\n  console.log('response',response);\n  console.log(response);\n  if(response.message&&response.message==\"Website settings updated successfully!\"){\n   \n    setSuccessAdd(\"Website settings updated successfully!\")\n setRefresh(!refresh)\n setVisible(5)\n  }\n  else{\n   \n    setVisible(5)\n  setErrorMessage(response.errors)\n  }\n \n} catch (err) {\n  console.log(err);\n \n}\n\nsetLoading(false)\n}\n\nconst handleImg=(e)=>{\n  if(e.target.files[0])\n { setPickedImg(e.target.files[0])}\n}\nconsole.log('p',dataText)\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center register-cont\">\n   \n      <CContainer>\n\n     {pageStatus==0&&<>\n      {fetchedData&&   <CCard>\n          <CCardHeader>\n          <CRow className=\"justify-content-center row-gap-15 \">\n            \n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n           About Us\n            </CCol>\n            <CCol md=\"6\" lg=\"6\" xl=\"6\" >\n            {/* className=\"row-gap-15 col-gap-15 \" */}\n                  <CButton color=\"success\"  className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>setPageStatus(1)} >Update\n                  </CButton>\n            </CCol>\n            </CRow>\n          </CCardHeader>\n          <CCardBody>\n          <CRow>\n            <CCol md='12'>\n             {fetchedData&& <img className='aboutUSImg' src={fetchedData.about_us_photo} />}\n            </CCol>\n          <CCol md='12'  dangerouslySetInnerHTML={{__html: fetchedData.about_us}} >\n            {/* {toHtml()} */}\n            \n              </CCol>\n              \n  \n             \n    </CRow>  \n          </CCardBody>\n        </CCard>\n       \n}\n     </>}\n    \n\n\n{fetchedData&&pageStatus==1&&<>\n\n\n         {/* mx-4 */}\n            <CCard className=\"\">\n\n            <CForm onSubmit={(e)=>{handleUpdateProfile(e)}}>\n\n            <CCardHeader>\n          <CRow className=\" row-gap-15\">\n            \n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n           Update About Us\n            </CCol>\n            <CCol md=\"6\" lg=\"6\" xl=\"6\">\n            <CButton color=\"success\"  className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>setPageStatus(0)} >Back\n                  </CButton>\n            </CCol>\n            </CRow>\n          </CCardHeader>\n\n              <CCardBody className=\"p-4\">\n          \n              <CRow className=\"justify-content-center\">\n              <CCol md='6'>       <CFormGroup row>\n                  <CLabel col md={12}>Change About Us Image</CLabel>\n                  <CCol xs=\"12\" md=\"12\">\n                  \n                    <CInputFile accept=\"image/*\" custom id=\"custom-file-input\" onChange={(e)=>{handleImg(e)}}  />\n\n                    <CLabel htmlFor=\"custom-file-input\" variant=\"custom-file\">\n                     {pickedImg?pickedImg.name:'Choose file...'}\n                      \n                    </CLabel>\n                  </CCol>\n                </CFormGroup></CCol>\n                 <CCol md='6'>\n                   {pickedImg?<img className=\"card-img-top\" src={URL.createObjectURL(pickedImg)}></img>:\n                   <img className=\"card-img-top\" src={fetchedData.about_us_photo}></img>}\n                 </CCol>\n                 \n              <CCol md=\"12\" lg=\"12\" xl=\"12\">\n              \n              <Editor className='col-md-12' setDataText={setDataText} dataText={dataText} />\n                  </CCol>\n      \n                 \n                 </CRow>\n              </CCardBody>\n              <CCardFooter className=\"p-4\">\n                <CRow className=\"justify-content-center\">\n         \n                   { errorMessage&& \n                   <CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                   color=\"danger\"\n                   // closeButton\n                   show={visible}\n                   // closeButton\n                   onShowChange={setVisible}\n              > \n               {     Object.keys(errorMessage).map((item, i) => (\n              \n         <>{errorMessage[item]}<br/></>  \n            \n                      \n                \n          ))}\n          </CAlert>\n          \n          }\n          \n              \n              \n              \n                { succesAdd&& \n                \n                \n                <CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                color=\"success\"\n                show={visible}\n                // closeButton\n                onShowChange={setVisible}\n                // closeButton\n              >\n            {succesAdd}\n              </CAlert>\n              \n              \n              }\n            \n                  <CCol  md=\"6\" lg=\"6\" xl=\"6\" xs=\"12\" sm=\"12\" >\n                  <CButton color=\"success\" block type='submit'>Save\n                  {loading&&<>{' '}<i className=\"fa fa-spinner fa-spin\" ></i></>} </CButton>\n                  </CCol>\n                \n                </CRow>\n              </CCardFooter>\n              </CForm>\n            </CCard>\n       \n       \n\n\n\n</>}\n    \n\n\n\n\n\n\n     \n      </CContainer>\n    </div>\n  )\n}\n\nexport default AboutUs\n","import React, { Component } from 'react';\r\nimport {EditorState, ContentState, convertFromHTML, convertToRaw,convertFromRaw} from 'draft-js';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport {stateFromHTML} from 'draft-js-import-html';\r\nclass ControlledEditor extends Component {\r\n  // constructor(props) {\r\n  //   super(props);\r\n  //   this.state = {\r\n  //     editorState: EditorState.createEmpty(),\r\n  //   };\r\n  //   console.log(props)\r\n  // }\r\n  constructor(props) {\r\n    super(props);\r\n    // var contentState = stateFromHTML(props.privacyPolicy);\r\n    // var editorStat = EditorState.createWithContent(ContentState.createFromBlockArray(convertFromHTML(props.privacyPolicy)));\r\n    \r\n    // const html = props.privacyPolicy;\r\n    // const contentBlock = htmlToDraft(html);\r\n   \r\n\r\n    //  const editorStateInitial =\r\n    //   EditorState.createWithContent(\r\n    //     ContentState.createFromBlockArray(contentBlock.htmlToDraft(props.privacyPolicy)));\r\n    \r\n    // var editorStat = EditorState.createWithContent(contentState);\r\n    this.state = {editorState:   EditorState.createWithContent(\r\n      ContentState.createFromBlockArray(htmlToDraft(props.dataText)))};\r\n}\r\n  onEditorStateChange=(editorState) => {\r\n    this.setState({\r\n      editorState,\r\n    });\r\n    console.log(draftToHtml(convertToRaw(editorState.getCurrentContent())))\r\n    this.props.setDataText(draftToHtml(convertToRaw(editorState.getCurrentContent())))\r\n  };\r\n\r\n  render() {\r\n    const { editorState } = this.state;\r\n    return (\r\n      <Editor\r\n        editorState={editorState}\r\n        wrapperClassName=\"demo-wrapper \"\r\n        editorClassName=\"demo-editor\"\r\n        onEditorStateChange={this.onEditorStateChange}\r\n      />\r\n    )\r\n  }\r\n}\r\nexport default ControlledEditor"],"sourceRoot":""}