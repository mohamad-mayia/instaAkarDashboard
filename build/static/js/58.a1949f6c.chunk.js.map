{"version":3,"sources":["views/offers/offer/offre.js"],"names":["StoredServices","match","history","useHistory","useState","setTotalPages","fetchedData","setfetchedData","showCard","tokenString","localStorage","getItem","userToken","JSON","parse","name_en","name_ar","code","amount","percentage","description_en","description_ar","expiration_date","user_id","times_used","upData","activeOffer","setActiveOffer","params","id","activeOfferId","useEffect","a","e","fetch","global","apiUrl","method","headers","Authorization","Accept","responsee","console","log","status","json","response","payload","temp","map","offer","index","push","active","Math","ceil","length","filter","item","message","removeItem","clear","fetchOffers","className","md","lg","xl","color","onClick","goBack","xs","sm","in"],"mappings":"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","file":"static/js/58.a1949f6c.chunk.js","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardFooter,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CPagination,\n  CDataTable,\n  CSelect,\n  CFormText,\nCTextarea,\nCFormGroup,\nCLabel,\nCInputFile,\n  CLink,\n  CFade,\n  CCollapse,\n  CBadge,\n  CRow,\n  CSwitch\n} from '@coreui/react'\nimport 'react-phone-number-input/style.css'\nimport PhoneInput from 'react-phone-number-input'\nimport CIcon from '@coreui/icons-react'\nimport './offer.scss'\n\nimport {CAlert} from '@coreui/react'\nimport { useHistory } from \"react-router-dom\";\n  \nimport '../../../globalVar'\n// import MIN_SAFE_INTEGER from 'core-js/fn/number/min-safe-integer'\nconst StoredServices = ({match}) => {\n  let history = useHistory();\n  const [visible, setVisible] = useState(10)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [totalPages, setTotalPages] = useState()\n  const[fetchedData,setfetchedData]=useState([])\n  const[fetchedUsers,setfetchedUsers]=useState([])\n  const[refresh,setRefresh]=useState('')\n  const [errorMessage, setErrorMessage] = useState();\n  const [collapsed, setCollapsed] = useState(true)\n  const [showCard, setShowCard] = useState(true)\n  const[succesAdd,setSuccessAdd]=useState()\n  const[loading,setLoading]=useState('')\n  const tokenString = localStorage.getItem(\"token\");\n  const userToken = JSON.parse(tokenString);\n  const[activeAmount,setActiveAmount]=useState(false)\n\n\n  const [pageStatus,setPageStatus]=useState(0)\n\n  const [upData,setUpData]=useState({\n    name_en:'',\n  name_ar:'',\n  code:'',\n  amount:'',\n  percentage:'',\n  description_en:'',\n  description_ar:'',\n  expiration_date:'',\n  user_id:'',\n  times_used:'',\n  \n  })\n  const{name_en,\n    name_ar,\n    code,\n    amount,\n    percentage,\n    description_en,\n    description_ar,\n    expiration_date,\n    user_id,\n    times_used,\n  \n  }=upData;\nconst [accordion, setAccordion] = useState()\n\nconst [types,setTypes]=useState([])\nconst [activeType,setActiveType]=useState('0')\nconst [categories,setCategories]=useState([])\nconst [activeCat,setActiveCat]=useState('0')\nconst [activeOffer,setActiveOffer]=useState('')\nconst [activeOfferId,setActiveOfferId]=useState(match.params.id)\nconst [withUser,setWithUser]=useState(false)\n\n\n\nuseEffect(async()=>{\n  const fetchOffers=async(e)=>{\n\n\n  \n  try {\n    const responsee = await fetch(\n      `${global.apiUrl}/offers/searchOffers`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + userToken,\n\n          Accept: \"application/json\",\n        },\n\n    \n      }\n    );\n    console.log(responsee.status);\n    if(responsee.status=='204'){setfetchedData([])}\n    const response = await responsee.json();\n    \n    console.log(responsee);\n  \n    if(response.payload){\n      let temp=[]\n     \n     await response.payload.map((offer,index)=>{\n      \n      temp.push({\n       \n        index:index+1,\n        id:offer.id,\n        name_en: offer.name_en,\n        name_ar: offer.name_ar,\n        code: offer.code,\n        amount: offer.amount,\n        percentage: offer.percentage,\n        description_en:offer.description_en,\n        description_ar:offer.description_ar,\n        expiration_date:offer.expiration_date,\n        user_id:offer.user_id,\n        times_used:offer.times_used,\n         active:offer.active,\n     \n      })\n  \n     })\n     await setTotalPages(Math.ceil(response.length/12))\n        setfetchedData(temp)\n\n        if(activeOfferId){\n          setActiveOffer(response.payload.filter(item=>item.id==activeOfferId)&&response.payload.filter(item=>item.id==activeOfferId)[0])\n        }\n     \n     }\n\n    if(response.message&&response.message==\"Unauthorized or invalid token!\"){\n    localStorage.removeItem(\"token\");\n    localStorage.clear()\n \n  history.push(\"/login\");\n    }\n   \n  } catch (err) {\n    console.log(err);\n   \n  }\n\n\n  \n  \n  }\n\n  fetchOffers()\n},[])\n\n\n\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center register-cont\">\n   \n      <CContainer>\n\n\n\n{fetchedData&&activeOffer&&<>\n\n\n         {/* mx-4 */}\n            <CCard className=\"\">\n\n        \n\n            <CCardHeader>\n          <CRow className=\" row-gap-15\">\n            \n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n           <strong>{activeOffer.name_en}</strong>\n            </CCol>\n          \n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className='row-gap-15 col-gap-15'>\n          \n            <CButton color=\"success\"  className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>history.goBack()} >Back\n                  </CButton>\n               \n            </CCol>\n            </CRow>\n          </CCardHeader>\n\n              <CCardBody className=\"p-4 ps-0\">\n                <CRow>\n                <CCol xs=\"12\" sm=\"12\" md=\"12\" className=''>\n          <CFade in={showCard}>\n         \n              <CRow className=''>\n             <CCol className=' p-1' md='6' >\n  \n  <ul className=\" card list-group list-group-flush\">\n  <li className=\"list-group-item\"><strong>Id : {' '}</strong>{activeOffer.id}</li>\n  <li className=\"list-group-item\"><strong>Status : {' '}</strong>{activeOffer.active==1?'Active':'Deactive'}</li>\n  <li className=\"list-group-item\"><strong>Code : {' '}</strong>{activeOffer.code}</li>\n   <li className=\"list-group-item\"><strong>Expiration Date : {' '}</strong>{activeOffer.expiration_date}</li>\n\n    <li className=\"list-group-item\"><strong>English Name:{' '}</strong><br/> {activeOffer.name_en}</li>\n   <li className=\"list-group-item\"><strong>Description En : {' '}<br/></strong>{activeOffer.description_en}</li>\n\n  </ul>\n  \n\n             </CCol>\n             <CCol className=' p-1'  md='6'>\n             <ul className=\" card list-group list-group-flush\">\n             <li className=\"list-group-item arabic-align\"><strong>اسم عربي :{' '}</strong><br/>{activeOffer.name_ar}</li>\n   <li className=\"list-group-item arabic-align\"><strong>وصف عربي :{' '}</strong><br/>{activeOffer.description_ar}</li>\n\n    <li className=\"list-group-item\"><strong>Percentage : {' '}</strong>{activeOffer.percentage?activeOffer.percentage+' %':'-'}</li>\n    <li className=\"list-group-item\"><strong>Amount : {' '}</strong>{activeOffer.amount?activeOffer.amount:'-'}</li>\n    <li className=\"list-group-item\"><strong>User Id : {' '}</strong>{activeOffer.user_id?activeOffer.user_id:'-'}</li>\n    <li className=\"list-group-item\"><strong>Times Used : {' '}</strong>{activeOffer.times_used?activeOffer.times_used:'-'}</li>\n   \n   \n\n  </ul>\n             </CCol>\n\n              </CRow>\n    \n          </CFade>\n        </CCol>\n                </CRow>\n\n\n                  \n              </CCardBody>\n   \n             \n              \n\n\n            </CCard>\n       \n       \n\n\n\n</>}\n    \n\n      </CContainer>\n    </div>\n  )\n}\n\nexport default StoredServices\n"],"sourceRoot":""}