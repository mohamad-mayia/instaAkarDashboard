{"version":3,"sources":["views/departments/Departments.js"],"names":["Departments","history","useHistory","useTranslation","i18n","useState","small","setSmall","large","data","setData","refresh","setRefresh","setErrorMessage","setSuccessAdd","pageStatus","setPageStatus","tokenString","localStorage","getItem","userToken","JSON","parse","setAmount","companies","setCompanies","setCompany","setDept","setExtNumber","activeCompany","setActiveCompany","useEffect","a","e","fetch","global","apiUrl","method","headers","Authorization","Accept","responsee","json","response","console","log","success","payload","filter","item","id","departments","message","removeItem","clear","push","fetchcompanies","language","activeUser","setActiveUser","setCharge","setNoCharge","getUser","status","removeFromDept","dept","user","document","getElementById","style","opacity","itemToDelete","setItemToDelete","handleDelete","xl","className","md","lg","color","onClick","row","htmlFor","xs","custom","name","required","value","onChange","val","target","length","map","company","name_ar","name_en","items","fields","hover","striped","pagination","sorter","itemsPerPage","columnFilter","scopedSlots","first_name","last_name","handleShowModal","handleShow","company_id","company_name","created_at","slice","employees","show","onClose","size","closeButton"],"mappings":"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","file":"static/js/107.246dc349.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CPagination,\n  CButton,\n  CForm,\n  CModal,\n  CModalBody,\n  CModalFooter,\n  CModalHeader,\n  CModalTitle,\n  CFormGroup, \nCLabel,\nCSelect,\nCInput,\nCInputGroup,\nCInputGroupPrepend,\nCInputGroupText,\nCCardFooter\n} from '@coreui/react'\nimport {CAlert} from '@coreui/react'\nimport '../../globalVar'\nimport './Departments.scss'\n\nimport { useTranslation } from 'react-i18next';\n\n\n\nconst Departments = () => {\n  const history = useHistory()\n  const [t, i18n] = useTranslation();\n\n  const [modal, setModal] = useState(true)\n  const [small, setSmall] = useState(false)\n  const [large, setLarge] = useState(false)\n   const [danger, setDanger] = useState(false)\n  const [data,setData]=useState('')\n  const [refresh, setRefresh] = useState(false)\n  const [errorMessage, setErrorMessage] = useState();\n  const [currentPage, setCurrentPage] = useState(1)\n  const [totalPages, setTotalPages] = useState()\n  const[succesAdd,setSuccessAdd]=useState()\n  const[loading,setLoading]=useState('')\n  const [pageStatus,setPageStatus]=useState(0)\n  const tokenString = localStorage.getItem(\"token\");\n  const userToken = JSON.parse(tokenString);\n  const[amount,setAmount]=useState('')\n  const [visible, setVisible] = useState(10)\n const [companies,setCompanies]=useState('')\nconst[company,setCompany]=useState('')\nconst[depts,setDepts]=useState([])\nconst[dept,setDept]=useState('')\nconst[extNumber,setExtNumber]=useState('')\nconst[activeCompany,setActiveCompany]=useState('')\n  // useEffect(async()=>{\n  //   const fetchUsers=async(e)=>{\n  //   try {\n  //     const responsee = await fetch(\n  //       `${global.apiUrl}/super/users?paginate=0`,\n  //       {\n  //         method: \"GET\",\n  //         headers: {\n  //           Authorization: \"Bearer \" + userToken,\n  //           Accept: \"application/json\",\n  //         },\n\n  //       }\n  //     );\n  //     const response = await responsee.json();\n  //     // console.log('response',response);\n  //     console.log('faqs',response);\n  //   if(response.success){\n  //    setData(response.payload)\n  //   //  setTotalPages(response.payload.last_page)\n  //   if(activeUser.id){setActiveUser(response.payload.filter(item=>item.id==activeUser.id)[0])}\n  \n  //   }\n  //     if(response.message&&response.message==\"Unauthenticated.\"){\n  //     localStorage.removeItem(\"token\");\n  //     localStorage.clear()\n   \n  //   history.push(\"/login\");\n  //     }\n     \n  //   } catch (err) {\n  //     console.log(err);\n     \n  //   }\n\n    \n    \n  //   }\n  \n  //   fetchUsers()\n  // },[currentPage,refresh])\n\n  useEffect(async()=>{\n const fetchcompanies=async(e)=>{\n  try {\n      const responsee = await fetch(\n        `${global.apiUrl}/super/companies?paginate=0`,\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + userToken,\n                       // \"Content-Type\": \"application/json\",\n                      //'Access-Control-Allow-Origin': 'https://localhost:3000',\n                      // 'Access-Control-Allow-Credentials': 'true',\n            Accept: \"application/json\",\n          },\n\n        }\n      );\n      const response = await responsee.json();\n      // console.log('response',response);\n      console.log('companies',response);\n    if(response.success){\n     setCompanies(response.payload)\n     if(activeCompany){\n      setData(response.payload.filter(item=>item.id==activeCompany)[0].departments)\n     }\n  \n    }\n      if(response.message&&response.message==\"Unauthorized.\"){\n      localStorage.removeItem(\"token\");\n      localStorage.clear()\n   \n    history.push(\"/login\");\n      }\n     \n    } catch (err) {\n      console.log(err);\n     \n    }\n\n    }\n  \n    fetchcompanies()\n  },[i18n.language,refresh])\n  \n const [activeUser,setActiveUser]=useState('')\n const[charge,setCharge]=useState([])\nconst[nocharge,setNoCharge]=useState(false)\n const handleShow=(item)=>{\n  //  setActiveUser(item)\n   getUser(item.id)\n  //  setExtNumber(item.extension_number?item.extension_number.slice(4,7):'')\n   setPageStatus(1)\n }\n\n const handleBack=(item)=>{\n  setActiveUser('')\n  setPageStatus(0)\n  setAmount('')\n  setCharge([])\n  setCompany('')\n  setDept('')\n  setExtNumber('')\n  setNoCharge(false)\n}\n\nconst handleAddToDept=async(e)=>{\n  e.preventDefault()\n  setLoading(true)\n  setVisible(7)\n  setErrorMessage('')\n  setSuccessAdd('')\nif(activeUser.id){\n  const data = new FormData();\n  dept&& data.append('department_id', dept);\n  \n  !activeUser.extension_number&&data.append('extension_number', extNumber);\n  // JSON.stringify({\n  //   \"department_id\" : dept,\n  //   \"extension_number\": extNumber\n  // })\n  try {\n    const responsee = await fetch(\n      `${global.apiUrl}/super/attach/users/${activeUser.id}/departments`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + userToken,\n          //  \"Content-Type\": \"application/json\",\n          // 'Access-Control-Allow-Origin': 'https://localhost:3000',\n          // 'Access-Control-Allow-Credentials': 'true',\n          Accept: \"application/json\",\n        },\n        body: data\n        ,\n    \n      }\n    );\n    const response = await responsee.json();\n    console.log('response',response);\n    console.log(response);\n    if(response.success){\n     \n      setSuccessAdd(i18n.language == 'ar' ? \"تمت اضافة المستخدم الى القسم بنجاح\" \n      : \"User has been added to department successfully\")\n    // setRefresh(!refresh)\n    // setAmount('')\n    // getAmount(activeUser.id)\n  // setUpData({api_key:''})\n   setVisible(7)\n    }\n    else{\n     \n      setVisible(7)\n    setErrorMessage(response.messages)\n    }\n   \n  } catch (err) {\n    console.log(err);\n   \n  }\n  \n  setLoading(false)\n\n}\n\n}\n\n\nconst  getUser=async(id)=>{\n  \n  try {\n    const responsee = await fetch(\n      `${global.apiUrl}/super/departments/${id}`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + userToken,\n                 \n          Accept: \"application/json\",\n        },\n     }\n    );\n    if(responsee.status==204){\n     \n    }\n    const response = await responsee.json();\n    console.log('response',response);\n    console.log(response);\n    if(response.success==true){\n      setActiveUser(response.payload)\n    }\n  } catch (err) {\n    console.log(err);\n   \n  }\n}\nconst  removeFromDept=async(dept,user)=>{\n  document.getElementById('root').style.opacity=0.75;\n\n\n  try {\n    const responsee = await fetch(\n      `${global.apiUrl}/super/detach/users/${user}/departments/${dept}`,\n      {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + userToken,\n                 \n          Accept: \"application/json\",\n        },\n     }\n    );\n    if(responsee.status==204){\n     \n    }\n    const response = await responsee.json();\n    console.log('response',response);\n    console.log(response);\n    if(response.success==true){\n      getUser(activeUser.id)\n      document.getElementById('root').style.opacity=1;\n\n    }\n  } catch (err) {\n    console.log(err);\n   \n  }\n  document.getElementById('root').style.opacity=1;\n}\nconst [itemToDelete,setItemToDelete]=useState('')\nconst handleShowModal=(item)=>{\n  setSmall(!large)\n  setItemToDelete(item)\n}\nconst handleDelete=async()=>{\n  setErrorMessage('')\n  setSuccessAdd('')\n  document.getElementById('root').style.opacity=0.75;\n\ntry {\n  const responsee = await fetch(\n    `${global.apiUrl}/super/departments/${itemToDelete.id}`,\n    {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \" + userToken,\n       \n        Accept: \"application/json\",\n      },\n \n  \n    }\n  );\n  const response = await responsee.json();\n  console.log('response',response);\n  console.log(response);\n  if(response.success==true&& response.payload){\n    setSmall(!small)\n    document.getElementById('root').style.opacity=1;\n   \n   setRefresh(!refresh)\n  \n  }\n  // else{\n  // setErrorMessage(response.errors)\n  // }\n \n} catch (err) {\n  console.log(err);\n \n}\ndocument.getElementById('root').style.opacity=1;\n\n}\nconst handleCompany=(val)=>{\n  setCompany(val)\n  setDept('')\n  if(val==''){\n    setDepts('')\n  }\n  else{\n    setDepts(companies.filter(item=>item.id==val)[0].departments)\n  }\n\n}\n\nconst handleActiveCompany=(val)=>{\n  setActiveCompany(val)\n \n  if(val==''){\n    setData('')\n  }\n  else{\n    setData(companies.filter(item=>item.id==val)[0].departments)\n  }\n\n}\n  return (\n    \n    <CRow>\n      {pageStatus==0&&\n       <CCol xl={12}>\n       <CCard>\n         <CCardHeader>\n         <CRow className=\" row-gap-15\">\n         <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n         {i18n.language == 'ar' ? \"الاقسام\" : \"Departments\"}\n              </CCol>\n        \n         <CCol md=\"6\" lg=\"6\" xl=\"6\" className='row-gap-15 col-gap-15'>\n          \n          <CButton color=\"success\"  className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n         onClick={()=>history.push('/Departments/AddNewDepartment')} >\n           {i18n.language == 'ar' ? `إضافة قسم جديد` : `Add New Department`}\n                </CButton>\n             \n          </CCol>\n\n         </CRow>\n           \n         </CCardHeader>\n         <CCardBody className='usersTabel'>\n\n         <CRow >\n         <CCol md=\"6\" lg=\"6\" xl=\"6\">\n\n<CFormGroup row>\n  <CCol md=\"12\">\n    <CLabel htmlFor=\"text-input\">\n    {i18n.language == 'ar' ? \"الشركة\" : \"Company\"}\n    </CLabel>\n  </CCol>\n  <CCol xs=\"12\" md=\"12\">\n    <CSelect custom name=\"\"\n    \n      required value={activeCompany} onChange={(e) => handleActiveCompany(e.target.value)}  >\n      <option value='' >\n        {i18n.language == 'ar' ? \"اختر شركة\" : \"Select Company\"}\n      </option>\n      {companies.length > 0 && companies.map((company) => {\n        return (<option value={company.id} key={company.id}>\n          {i18n.language == 'ar' ? company.name_ar : company.name_en}\n        </option>)\n      })}\n\n    </CSelect>\n  </CCol>\n</CFormGroup>\n\n</CCol>\n\n                      </CRow>\n\n\n      { data?  <CDataTable\n           items={data}\n           fields={['id','name_en','name_ar','company_name', 'actions']}\n           hover\n           striped\n           pagination\n        \n           sorter\nitemsPerPage={12}\n columnFilter\n           // clickableRows\n           // onRowClick={(item) => history.push(`/users/${item.id}`)}\n           scopedSlots = {{\n     \n               'name':\n               (item)=>(\n                 <td>\n                {item.first_name+' '+item.last_name}\n                 </td>\n               ),\n               'actions':\n               (item)=>(\n                 <td>\n                 <CBadge className=\"p-1 m-1 badg-click\" color=\"danger\"\n                     onClick={() =>handleShowModal(item) }\n                      >{i18n.language == 'ar' ? \"حذف\" : \"Delete\"}</CBadge>\n                    <br/>\n                     <CBadge className=\"p-1  m-1 badg-click\" color=\"info\"  onClick={()=>handleShow(item)}  >\n                     {i18n.language == 'ar' ? \"عرض .....\" : \"Show....\"}</CBadge> \n                  \n                 </td>\n               ),\n\n           }}\n         />\n        :\n        \n        <CRow>\n          <CCol  md='12'>\n          <CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                           color=\"warning\"\n                           // closeButton\n                           // show={visible}\n                           // closeButton\n                           // onShowChange={setVisible}\n                         >\n   {i18n.language == 'ar' ? \"اختر شركة لعرض الأقسام الخاصة بها\" : \"Select a Copmany to view its Departments\"}\n                         </CAlert>\n          </CCol>\n        </CRow>}\n\n         </CCardBody>\n       </CCard>\n     </CCol>\n      }\n      {\n        pageStatus==1&&activeUser&&\n        <CCol xl={12}>\n        <CCard>\n          <CCardHeader>\n          <CRow className=\"justify-content-center row-gap-15 \">\n\n\n        \n\n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n           {i18n.language == 'ar' ? activeUser.name_ar : activeUser.name_en}\n            </CCol>\n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\" row-gap-15 col-gap-15 \">\n            <CButton color=\"info\"  className='col-lg-4  col-md-4 col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>history.push(`/Departments/Update/${activeUser.id}`)} >{i18n.language == 'ar' ? `تعديل` : `Update`}\n                  </CButton>\n                  <CButton color=\"success\"  className='col-lg-4  col-md-4col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>handleBack()} >{i18n.language == 'ar' ? `رجوع` : `Back`}\n                  </CButton>\n         \n            </CCol>\n            </CRow>\n      \n          </CCardHeader>\n          <CCardBody className=''>\n     \n       \n         \n          <CRow>\n            <CCol md='12'><strong>{i18n.language == 'ar' ? `معلومات القسم` : `Department Informations`}</strong></CCol>\n      <CCol lg={6}>\n              <table className=\"table table-striped table-hover\">\n                <tbody>\n                         <tr >\n                          <td>ID</td>\n                          <td><strong>{activeUser.id}</strong></td>\n                        </tr>\n                        <tr >\n                          <td>{i18n.language == 'ar' ? `الاسم الانكليزي` : `English Name`}</td>\n                          <td><strong>{activeUser.name_en}</strong></td>\n                        </tr>\n                        <tr >\n                          <td>{i18n.language == 'ar' ? `الاسم العربي` : `Arabic Name`}</td>\n                          <td><strong>{activeUser.name_ar}</strong></td>\n                        </tr>\n                     \n\n                  \n                </tbody>\n              </table>\n              </CCol>\n              <CCol lg={6}>\n              <table className=\"table table-striped table-hover\">\n                <tbody>\n             \n                        <tr >\n                          <td>{i18n.language == 'ar' ? `Company Id` : `Company Id`}</td>\n                          <td><strong>{activeUser.company_id}</strong></td>\n                        </tr>\n                        \n                        <tr >\n                          <td>{i18n.language == 'ar' ? `الشركة` : `Company`}</td>\n                          <td><strong>{activeUser.company_name}</strong></td>\n                        </tr>\n                        <tr >\n                          <td>{i18n.language == 'ar' ? `تاريخ الانشاء` : `Created At`}</td>\n                          <td><strong> {activeUser.created_at&&activeUser.created_at.slice(0,10)}</strong></td>\n                        </tr>\n                        \n                      \n                        \n                </tbody>\n              </table>\n              </CCol>\n    </CRow>  \n<CRow>\n\n{activeUser.employees.length==0&& <CCol md='12'>\n<CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                   color=\"info\"\n                > \n     <strong>{i18n.language == 'ar' ? `لا يوجد موظفون في هذا القسم` : `No Employees In This Department`}</strong>\n          </CAlert>\n</CCol>\n                \n          \n          }\n\n{activeUser.employees.length>0&& <><CCol md='12'>\n  <strong>{i18n.language == 'ar' ? `الموظفون في هذا القسم` : `Employees In This Department`}</strong>\n</CCol>\n<CCol md='12' className='usersTabel'>\n{ activeUser.employees&&  <CDataTable\n           items={activeUser.employees}\n           fields={['id','email','username', 'position','actions']}\n           hover\n           striped\n           pagination\n        sorter\nitemsPerPage={12}\n columnFilter\n           // clickableRows\n           // onRowClick={(item) => history.push(`/users/${item.id}`)}\n           scopedSlots = {{\n           \n            'actions':\n            (item)=>(\n              <td>\n           \n                  <CBadge className=\"p-1  m-1 badg-click\" color=\"danger\" \n                   onClick={()=>removeFromDept(activeUser.id,item.id)}  >\n                  {i18n.language == 'ar' ? \"إزالة ...\" : \"Remove...\"}</CBadge> \n               \n              </td>\n            ),\n\n              \n\n           }}\n         />}\n\n</CCol>\n</>\n}\n</CRow>\n\n          </CCardBody>\n        </CCard>\n      </CCol>\n\n\n      }\n       <CModal \n              show={small} \n              onClose={() => setSmall(!small)}\n              size=\"sm\"\n              color='danger'\n            >\n              <CModalHeader closeButton>\n                <CModalTitle>{i18n.language == 'ar' ? \"حذف قسم\" : \"Delete Department\"}</CModalTitle>\n              </CModalHeader>\n              <CModalBody>\n              {i18n.language == 'ar' ? `هل انت متأكد أنك تريد حذف قسم (${itemToDelete.name_ar})` \n              : `Are you sure you want to delete a department (${itemToDelete.name_en})`}\n              </CModalBody>\n              <CModalFooter>\n                <CButton color=\"danger\" onClick={() =>handleDelete()}>{i18n.language == 'ar' ? \"حذف\" : \"Delete\"}</CButton>{' '}\n                <CButton color=\"secondary\" onClick={() => setSmall(!small)}>{i18n.language == 'ar' ? \"الغاء\" : \"Cancel\"}</CButton>\n              </CModalFooter>\n            </CModal>\n     \n    </CRow>\n  )\n}\n\nexport default Departments\n"],"sourceRoot":""}