{"version":3,"sources":["views/settings/howToUseAr/howToUse.js","views/settings/howToUseAr/editor.js"],"names":["HowToUse","props","history","useHistory","useState","visible","setVisible","fetchedData","setfetchedData","refresh","setRefresh","errorMessage","setErrorMessage","succesAdd","setSuccessAdd","loading","setLoading","tokenString","localStorage","getItem","userToken","JSON","parse","userId","pageStatus","setPageStatus","facebook","twitter","linkedin","instagram","email","address","phone","upData","dataText","setDataText","useEffect","a","e","fetch","global","apiUrl","method","headers","Authorization","Accept","responsee","json","response","console","log","message","payload","how_to_use_ar","removeItem","clear","push","fetchSettings","handleUpdateProfile","preventDefault","data","FormData","append","body","errors","className","md","lg","xl","color","onClick","dangerouslySetInnerHTML","__html","onSubmit","show","onShowChange","Object","keys","map","item","i","xs","sm","block","type","ControlledEditor","onEditorStateChange","editorState","setState","draftToHtml","convertToRaw","getCurrentContent","state","EditorState","createWithContent","ContentState","createFromBlockArray","htmlToDraft","this","wrapperClassName","editorClassName","Component"],"mappings":"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","file":"static/js/71.b94e0b6b.chunk.js","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCardFooter,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CRow\n} from '@coreui/react'\nimport 'react-phone-number-input/style.css'\nimport PhoneInput from 'react-phone-number-input'\nimport CIcon from '@coreui/icons-react'\nimport '../../../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport './howToUse.scss'\nimport {CAlert} from '@coreui/react'\nimport { useHistory } from \"react-router-dom\";\n\nimport '../../../globalVar'\nimport Editor from './editor'\nconst HowToUse = (props) => {\n  let history = useHistory();\n\n  const [visible, setVisible] = useState(10)\n  // const [value, setValue] = useState()\n  const[fetchedData,setfetchedData]=useState('')\n  const[refresh,setRefresh]=useState('')\n  const [errorMessage, setErrorMessage] = useState();\n  \n  const[succesAdd,setSuccessAdd]=useState()\n  const[loading,setLoading]=useState('')\n  const tokenString = localStorage.getItem(\"token\");\n  const userToken = JSON.parse(tokenString);\n  const userId = localStorage.getItem(\"user_id\");\n  const user_id = JSON.parse(userId);\n  const [pageStatus,setPageStatus]=useState(0)\nconst [upData,setUpData]=useState({\n  facebook:'',\ntwitter:'',\nlinkedin:'',\ninstagram:'',\nemail:'',\naddress:'',phone:''\n})\nconst{ facebook,\ntwitter,\nlinkedin,\ninstagram,\nemail,\naddress,phone\n}=upData;\n\nconst[dataText,setDataText]=useState('')\n\nuseEffect(async()=>{\n  const fetchSettings=async(e)=>{\n\n\n  \n  try {\n    const responsee = await fetch(\n      `${global.apiUrl}/settings/viewWebsiteSettings`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + userToken,\n                     // \"Content-Type\": \"application/json\",\n                    //'Access-Control-Allow-Origin': 'https://localhost:3000',\n                    // 'Access-Control-Allow-Credentials': 'true',\n          Accept: \"application/json\",\n        },\n\n    \n      }\n    );\n    const response = await responsee.json();\n    // console.log('response',response);\n    console.log(response);\n  if(response.message== \"Website settings retrieved successfully!\"){\n   setfetchedData(response.payload)\n   setDataText(response.payload.how_to_use_ar)\n  }\n    if(response.message&&response.message==\"Unauthorized or invalid token!\"){\n    localStorage.removeItem(\"token\");\n    localStorage.clear()\n \n  history.push(\"/login\");\n    }\n   \n  } catch (err) {\n    console.log(err);\n   \n  }\n\n  // setLoading(false)\n  \n  \n  }\n\n  fetchSettings()\n},[refresh])\n\n\n\n\nconst handleData=(e)=>{\n  setUpData({...upData,[e.target.name]:e.target.value})\n\n  setErrorMessage('')\n  setSuccessAdd('')\n}\n\nconst handleUpdateProfile=async(e)=>{\n  e.preventDefault()\n  setLoading(true)\n  \n  setErrorMessage('')\n  setSuccessAdd('')\n\n\n  const data = new FormData();\ndataText&& data.append('how_to_use_ar',dataText );\n\n\n\ntry {\n  const responsee = await fetch(\n    `${global.apiUrl}/settings/updateWebsiteSettings`,\n    {\n      method: \"POST\",\n      headers: {\n        Authorization: \"Bearer \" + userToken,\n                   // \"Content-Type\": \"application/json\",\n                  //'Access-Control-Allow-Origin': 'https://localhost:3000',\n                  // 'Access-Control-Allow-Credentials': 'true',\n        Accept: \"application/json\",\n      },\n      body:data,\n  \n    }\n  );\n  const response = await responsee.json();\n  console.log('response',response);\n  console.log(response);\n  if(response.message&&response.message==\"Website settings updated successfully!\"){\n   \n    setSuccessAdd(\"Website settings updated successfully!\")\n setRefresh(!refresh)\n setVisible(5)\n  }\n  else{\n   \n    setVisible(5)\n  setErrorMessage(response.errors)\n  }\n \n} catch (err) {\n  console.log(err);\n \n}\n\nsetLoading(false)\n}\nconsole.log('p',dataText)\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center register-cont\">\n   \n      <CContainer>\n\n     {pageStatus==0&&<>\n      {fetchedData&&   <CCard>\n          <CCardHeader>\n          <CRow className=\"justify-content-center row-gap-15 \">\n            \n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n           How To Use\n            </CCol>\n            <CCol md=\"6\" lg=\"6\" xl=\"6\" >\n            {/* className=\"row-gap-15 col-gap-15 \" */}\n                  <CButton color=\"success\"  className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>setPageStatus(1)} >Update\n                  </CButton>\n            </CCol>\n            </CRow>\n          </CCardHeader>\n          <CCardBody>\n          <CRow>\n          <CCol md='12' className='arbicJustfiy' dangerouslySetInnerHTML={{__html: fetchedData.how_to_use_ar}} >\n            {/* {toHtml()} */}\n            \n              </CCol>\n              \n  \n             \n    </CRow>  \n          </CCardBody>\n        </CCard>\n       \n}\n     </>}\n    \n\n\n{fetchedData&&pageStatus==1&&<>\n\n\n         {/* mx-4 */}\n            <CCard className=\"\">\n\n            <CForm onSubmit={(e)=>{handleUpdateProfile(e)}}>\n\n            <CCardHeader>\n          <CRow className=\" row-gap-15\">\n            \n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n           Update How To Use\n            </CCol>\n            <CCol md=\"6\" lg=\"6\" xl=\"6\">\n            <CButton color=\"success\"  className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>setPageStatus(0)} >Back\n                  </CButton>\n            </CCol>\n            </CRow>\n          </CCardHeader>\n\n              <CCardBody className=\"p-4\">\n          \n              <CRow className=\"justify-content-center\">\n              <CCol md=\"12\" lg=\"12\" xl=\"12\">\n              \n              <Editor className='col-md-12' setDataText={setDataText} dataText={dataText} />\n                  </CCol>\n      \n                 \n                 </CRow>\n              </CCardBody>\n              <CCardFooter className=\"p-4\">\n                <CRow className=\"justify-content-center\">\n         \n                   { errorMessage&& \n                   <CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                   color=\"danger\"\n                   // closeButton\n                   show={visible}\n                   // closeButton\n                   onShowChange={setVisible}\n              > \n               {     Object.keys(errorMessage).map((item, i) => (\n              \n         <>{errorMessage[item]}<br/></>  \n            \n                      \n                \n          ))}\n          </CAlert>\n          \n          }\n          \n              \n              \n              \n                { succesAdd&& \n                \n                \n                <CAlert className='col-lg-12  col-md-12 col-sm-12 col-xs-12 '\n                color=\"success\"\n                show={visible}\n                // closeButton\n                onShowChange={setVisible}\n                // closeButton\n              >\n            {succesAdd}\n              </CAlert>\n              \n              \n              }\n            \n                  <CCol  md=\"6\" lg=\"6\" xl=\"6\" xs=\"12\" sm=\"12\" >\n                  <CButton color=\"success\" block type='submit'>Save\n                  {loading&&<>{' '}<i className=\"fa fa-spinner fa-spin\" ></i></>} </CButton>\n                  </CCol>\n                \n                </CRow>\n              </CCardFooter>\n              </CForm>\n            </CCard>\n       \n       \n\n\n\n</>}\n    \n\n\n\n\n\n\n     \n      </CContainer>\n    </div>\n  )\n}\n\nexport default HowToUse \n\n","import React, { Component } from 'react';\r\nimport {EditorState, ContentState, convertFromHTML, convertToRaw,convertFromRaw} from 'draft-js';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport {stateFromHTML} from 'draft-js-import-html';\r\nclass ControlledEditor extends Component {\r\n  // constructor(props) {\r\n  //   super(props);\r\n  //   this.state = {\r\n  //     editorState: EditorState.createEmpty(),\r\n  //   };\r\n  //   console.log(props)\r\n  // }\r\n  constructor(props) {\r\n    super(props);\r\n    // var contentState = stateFromHTML(props.privacyPolicy);\r\n    // var editorStat = EditorState.createWithContent(ContentState.createFromBlockArray(convertFromHTML(props.privacyPolicy)));\r\n    \r\n    // const html = props.privacyPolicy;\r\n    // const contentBlock = htmlToDraft(html);\r\n   \r\n\r\n    //  const editorStateInitial =\r\n    //   EditorState.createWithContent(\r\n    //     ContentState.createFromBlockArray(contentBlock.htmlToDraft(props.privacyPolicy)));\r\n    \r\n    // var editorStat = EditorState.createWithContent(contentState);\r\n    this.state = {editorState:   EditorState.createWithContent(\r\n      ContentState.createFromBlockArray(htmlToDraft(props.dataText)))};\r\n}\r\n  onEditorStateChange=(editorState) => {\r\n    this.setState({\r\n      editorState,\r\n    });\r\n    console.log(draftToHtml(convertToRaw(editorState.getCurrentContent())))\r\n    this.props.setDataText(draftToHtml(convertToRaw(editorState.getCurrentContent())))\r\n  };\r\n\r\n  render() {\r\n    const { editorState } = this.state;\r\n    return (\r\n      <Editor\r\n        editorState={editorState}\r\n        wrapperClassName=\"demo-wrapper \"\r\n        editorClassName=\"demo-editor\"\r\n        onEditorStateChange={this.onEditorStateChange}\r\n      />\r\n    )\r\n  }\r\n}\r\nexport default ControlledEditor"],"sourceRoot":""}