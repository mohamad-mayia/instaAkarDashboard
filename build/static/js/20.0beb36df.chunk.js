(this.webpackJsonpinstaakar=this.webpackJsonpinstaakar||[]).push([[20],{1007:function(e,t,n){"use strict";n.r(t),function(e){var a=n(121),c=n.n(a),s=n(174),r=n(659),o=n(1),l=n.n(o),i=n(14),u=n(658),j=(n(1008),n(660),n(1419)),d=n(176),b=n(1503),p=(n(826),n(17));t.default=function(){Object(i.g)();var t=Object(b.a)(),n=Object(r.a)(t,2),a=n[0],h=n[1],O=Object(o.useContext)(d.a).refreshTokenHandler,x=Object(o.useState)(10),g=Object(r.a)(x,2),f=g[0],m=g[1],y=Object(o.useState)(!1),S=Object(r.a)(y,2),k=S[0],v=S[1],w=Object(o.useState)(""),C=Object(r.a)(w,2),N=C[0],T=C[1],A=Object(o.useState)([]),R=Object(r.a)(A,2),E=R[0],_=R[1],D=Object(o.useState)(!1),B=Object(r.a)(D,2),I=B[0],M=B[1],U=Object(o.useState)(),z=Object(r.a)(U,2),F=z[0],J=z[1],q=Object(o.useState)(1),P=Object(r.a)(q,2),H=P[0],L=(P[1],Object(o.useState)({current_page:1,total:1})),V=Object(r.a)(L,2),G=(V[0],V[1],Object(o.useState)()),W=Object(r.a)(G,2),K=W[0],Q=W[1],X=Object(o.useState)(""),Y=Object(r.a)(X,2),Z=Y[0],$=Y[1],ee=Object(o.useState)(0),te=Object(r.a)(ee,2),ne=te[0],ae=(te[1],localStorage.getItem("token")),ce=JSON.parse(ae),se=Object(o.useState)(!1),re=Object(r.a)(se,2),oe=re[0],le=re[1],ie=Object(o.useState)({id:"",text:""}),ue=Object(r.a)(ie,2),je=ue[0],de=ue[1],be=Object(o.useState)("api/viewAllRequests"),pe=Object(r.a)(be,2),he=pe[0],Oe=pe[1],xe=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de({id:t.id,text:t.text});case 2:return T(""),e.next=5,le(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){le(!1),T(""),de({id:"",text:""}),J(""),Q("")},fe=function(){var t=Object(s.a)(c.a.mark((function t(n){var a,s,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("token")),t.prev=1,t.next=4,fetch("".concat(e.apiUrl).concat(he),{method:"GET",headers:{Authorization:"Bearer "+a,Accept:"application/json"}});case 4:return 204==(s=t.sent).status&&_([]),t.next=8,s.json();case 8:if(!(r=t.sent).message||"Unauthenticated."!=r.message){t.next=11;break}return t.abrupt("return",O((function(){fe(n)})));case 11:r.message&&"Success"==r.message&&_(r.payload),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){fe()}),[H,I,he]);var me=Object(o.useState)(""),ye=Object(r.a)(me,2),Se=ye[0],ke=(ye[1],function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return J(""),Q(""),document.getElementById("root").style.opacity=.75,t.prev=3,t.next=6,fetch("".concat(e.apiUrl,"api/contacts/").concat(Se.id),{method:"DELETE",headers:{Authorization:"Bearer "+ce,Accept:"application/json"}});case 6:200==t.sent.status&&(v(!k),document.getElementById("root").style.opacity=1,M(!I)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:document.getElementById("root").style.opacity=1;case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}()),ve=function(){var t=Object(s.a)(c.a.mark((function t(n){var a,s,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),$(!0),J(""),Q(""),a=JSON.parse(localStorage.getItem("token")),s=new FormData,N&&s.append("reply",N),N&&s.append("contact_us_id",je.id),t.prev=8,t.next=11,fetch("".concat(e.apiUrl,"api/reply"),{method:"POST",headers:{Authorization:"Bearer "+a,Accept:"application/json"},body:s});case 11:return 200==(r=t.sent).status&&(de(je),Q("ar"==h.language?"\u062a\u0645 \u0627\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u062f \u0628\u0646\u062c\u0627\u062d":"Reply has been sent successfully"),M(!I),m(5)),$(!1),t.next=16,r.json();case 16:if(o=t.sent,m(10),"Fail"!==o.message){t.next=23;break}return J(o.error),t.abrupt("return");case 23:if(!o.errors){t.next=27;break}J(o.errors),t.next=29;break;case 27:if(!o.message||"Unauthenticated."!=o.message){t.next=29;break}return t.abrupt("return",O((function(){ve(n)})));case 29:t.next=34;break;case 31:t.prev=31,t.t0=t.catch(8),console.log(t.t0);case 34:$(!1);case 35:case"end":return t.stop()}}),t,null,[[8,31]])})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)(u.wb,{children:[0==ne&&Object(p.jsx)(u.u,{xl:12,children:Object(p.jsxs)(u.j,{children:[Object(p.jsxs)(u.n,{children:[Object(p.jsx)(u.u,{md:"12",children:Object(p.jsx)("strong",{children:a("Messages")})}),Object(p.jsx)(u.u,{md:"4",lg:"4",xl:"4",children:Object(p.jsxs)(u.xb,{custom:!0,name:"select",onChange:function(e){return function(e){Oe("api/viewAllRequests".concat(e.target.value))}(e)},children:[Object(p.jsxs)("option",{value:"",children:[a("All")," "]}),Object(p.jsx)("option",{value:"?seen=1",children:"ar"===h.language?"\u062a\u0645\u062a \u0631\u0624\u064a\u062a\u0647":"Seen"}),Object(p.jsx)("option",{value:"?seen=0",children:"ar"===h.language?"\u0644\u0645 \u062a\u062a\u0645 \u0631\u0624\u064a\u062a\u0647":"Unseen"}),Object(p.jsx)("option",{value:"?replied=1",children:"ar"===h.language?"\u062a\u0645 \u0627\u0644\u0631\u062f":"Replied"}),Object(p.jsx)("option",{value:"?replied=0",children:"ar"===h.language?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0631\u062f":"Not Replied"})]})})]}),Object(p.jsx)(u.k,{className:"usersTabel",children:E.length>0&&Object(p.jsx)(u.y,{items:E,fields:["id",{label:a("Name"),key:"name"},{label:a("Email"),key:"email"},{label:a("Phone"),key:"phone"},{label:a("Address"),key:"address"},{label:a("Message"),key:"text"},{label:a("Replay"),key:"Replay"},{label:a("Date"),key:"date"},{label:a("Actions"),key:"\u0639\u0645\u0644\u064a\u0627\u062a"}],hover:!0,striped:!0,sorter:!0,pagination:!0,itemsPerPage:12,size:"sm",scopedSlots:{Replay:function(e){return Object(p.jsx)("td",{dangerouslySetInnerHTML:{__html:e.replied&&e.reply?e.reply:"No Replay"}})},text:function(e){return Object(p.jsx)("td",{dangerouslySetInnerHTML:{__html:e.text}})},date:function(e){return Object(p.jsx)("td",{children:e&&e.created_at.slice(0,10)})},"\u0639\u0645\u0644\u064a\u0627\u062a":function(t){return Object(p.jsxs)("td",{children:[Object(p.jsx)(u.b,{className:"p-1  m-1 badg-click",color:t.seen?"success":"secondary",onClick:function(){return function(t){var n=JSON.parse(localStorage.getItem("token")),a=new FormData;a.append("contact_us_id",t),fetch("".concat(e.apiUrl,"api/setRequestAsSeen?_method=put"),{method:"POST",headers:{Authorization:"Bearer "+n,Accept:"application/json"},body:a}).then((function(e){return e.json()})).then((function(e){!e.message||"Contact us request has been set as seen"!=e.message&&"Contact us request has been set as unseen"!=e.message||M(!I)})).catch((function(e){return console.log(e)}))}(t.id)},children:t.seen?a("Viewed"):a("View")}),t.replied?Object(p.jsxs)(u.b,{className:"p-1  m-1 badg-click",color:"success",children:["ar"===h.language?"\u062a\u0645 \u0627\u0644\u0631\u062f":"Replied","      "]}):Object(p.jsxs)(u.b,{className:"p-1  m-1 badg-click",color:"info",onClick:function(){return xe(t)},children:["ar"===h.language?"\u0631\u062f":"Reply","      "]})]})}}})})]})}),Object(p.jsxs)(u.gb,{show:oe,onClose:ge,children:[Object(p.jsx)(u.jb,{closeButton:!0,children:Object(p.jsxs)(u.kb,{children:["ar"===h.language?"\u0627\u0631\u0633\u0627\u0644 \u0631\u062f":"Send Reply","    "]})}),Object(p.jsxs)(u.hb,{children:[Object(p.jsxs)(u.wb,{children:[Object(p.jsxs)(u.u,{md:"12",children:["ar"===h.language?"\u0627\u0644\u0631\u0633\u0627\u0644\u0629 :":"Message :","  "]}),Object(p.jsx)(u.u,{md:"12",children:je.text?Object(p.jsx)("div",{dangerouslySetInnerHTML:{__html:je.text}}):null}),Object(p.jsxs)(u.u,{md:"12",children:["ar"===h.language?"\u0627\u0644\u0631\u062f :":"Reply :","    "]}),""!=je.message&&Object(p.jsx)(j.a,{setDataText:T,dataText:N})]}),Object(p.jsxs)(u.wb,{className:"justify-content-center",children:[F&&"object"===typeof F?Object(p.jsx)(u.a,{color:"danger",className:"col-lg-12",children:Object.keys(F).map((function(e,t){return Object(p.jsxs)(l.a.Fragment,{children:[F[e],Object(p.jsx)("br",{})]},t)}))}):null,F&&"string"===typeof F?Object(p.jsxs)(u.a,{color:"danger",className:"col-lg-12",children:[F," "]}):null,K&&Object(p.jsx)(u.u,{md:"12",children:Object(p.jsx)(u.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"success",show:f,onShowChange:m,children:K})})]})]}),Object(p.jsxs)(u.ib,{children:[Object(p.jsxs)(u.f,{color:"primary",onClick:function(e){ve(e)},children:["ar"===h.language?"\u0627\u0631\u0633\u0627\u0644 \u0631\u062f":"Send Reply","     ",Z&&Object(p.jsxs)(p.Fragment,{children:[" ",Object(p.jsx)("i",{className:"fa fa-spinner fa-spin"})]})]})," ",Object(p.jsx)(u.f,{color:"secondary",onClick:function(){return ge()},children:a("Cancel")})]})]}),Object(p.jsxs)(u.gb,{show:k,onClose:function(){return v(!k)},size:"sm",color:"danger",children:[Object(p.jsx)(u.jb,{closeButton:!0,children:Object(p.jsx)(u.kb,{children:" Delete Message"})}),Object(p.jsx)(u.hb,{children:"Are you sure you want to delete message (".concat(Se.name,")")}),Object(p.jsxs)(u.ib,{children:[Object(p.jsx)(u.f,{color:"danger",onClick:function(){return ke()},children:"Delete"})," ",Object(p.jsx)(u.f,{color:"secondary",onClick:function(){return v(!k)},children:"Cancel"})]})]})]})}}.call(this,n(73))},1008:function(e,t,n){"use strict";n(1009),n(658),n(17)},1009:function(e,t,n){},1010:function(e,t,n){},1419:function(e,t,n){"use strict";var a=n(1),c=n(658),s=(n(661),n(663),n(706),n(1010),n(660),n(684)),r=n(685),o=n(694),l=n(695),i=n(686),u=n(700),j=n(701),d=n.n(j),b=n(702),p=n.n(b),h=(n(704),n(17)),O=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onEditorStateChange=function(e){a.setState({editorState:e}),a.props.setDataText(d()(Object(i.convertToRaw)(e.getCurrentContent())))},a.state={editorState:i.EditorState.createWithContent(i.ContentState.createFromBlockArray(p()(e.dataText)))},a}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state.editorState;return Object(h.jsx)(u.Editor,{editorState:e,wrapperClassName:"demo-wrapper ",editorClassName:"demo-editor",onEditorStateChange:this.onEditorStateChange})}}]),n}(a.Component);t.a=function(e){var t=e.dataText,n=e.setDataText;return Object(h.jsx)(c.u,{md:"12",lg:"12",xl:"12",children:Object(h.jsx)(O,{className:"col-md-12",setDataText:n,dataText:t})})}},826:function(e,t,n){}}]);
//# sourceMappingURL=20.0beb36df.chunk.js.map