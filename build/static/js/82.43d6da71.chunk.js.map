{"version":3,"sources":["views/Customers/Customers.js"],"names":["Customers","history","useHistory","useTranslation","i18n","useState","data","setData","refresh","currentPage","pageStatus","setPageStatus","tokenString","localStorage","getItem","userToken","JSON","parse","useEffect","a","e","fetch","global","apiUrl","method","headers","Authorization","Accept","responsee","json","response","console","log","success","payload","activeUser","id","getCustomer","message","removeItem","clear","push","fetchCustomers","setActiveUser","handleShow","item","status","xl","language","className","items","fields","hover","striped","pagination","sorter","itemsPerPage","columnFilter","clickableRows","onRowClick","scopedSlots","phones","lenght","map","phone","index","Fragment","number","color","onClick","md","lg","name","civil_id","email","company_id","company_name","avenue","street","block","building","floor","flat","area_id","notes","blocking_reason"],"mappings":"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","file":"static/js/82.43d6da71.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CPagination,\n  CButton,\n  CForm,\n  CModal,\n  CModalBody,\n  CModalFooter,\n  CModalHeader,\n  CModalTitle,\n  CFormGroup, \nCLabel,\nCSelect,\nCInput,\nCInputGroup,\nCInputGroupPrepend,\nCInputGroupText,\nCCardFooter\n} from '@coreui/react'\nimport {CAlert} from '@coreui/react'\nimport '../../globalVar'\nimport './Customers.scss'\n\nimport { useTranslation } from 'react-i18next';\n\n\n\nconst Customers = () => {\n  const history = useHistory()\n  const [t, i18n] = useTranslation();\n\n  const [modal, setModal] = useState(true)\n  const [small, setSmall] = useState(false)\n  const [large, setLarge] = useState(false)\n   const [danger, setDanger] = useState(false)\n  const [data,setData]=useState('')\n  const [refresh, setRefresh] = useState(false)\n  const [errorMessage, setErrorMessage] = useState();\n  const [currentPage, setCurrentPage] = useState(1)\n \n  const[succesAdd,setSuccessAdd]=useState()\n  const[loading,setLoading]=useState('')\n  const [pageStatus,setPageStatus]=useState(0)\n  const tokenString = localStorage.getItem(\"token\");\n  const userToken = JSON.parse(tokenString);\n\n  const [visible, setVisible] = useState(10)\n\n\n\n\n\n  useEffect(async()=>{\n    const fetchCustomers=async(e)=>{\n    try {\n      const responsee = await fetch(\n        `${global.apiUrl}/super/customers?paginate=0`,\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + userToken,\n            Accept: \"application/json\",\n          },\n\n        }\n      );\n      const response = await responsee.json();\n      // console.log('response',response);\n      console.log('faqs',response);\n    if(response.success){\n     setData(response.payload)\n    //  setTotalPages(response.payload.last_page)\n    if(activeUser.id){getCustomer(activeUser.id)}\n  \n    }\n      if(response.message&&response.message==\"Unauthenticated.\"){\n      localStorage.removeItem(\"token\");\n      localStorage.clear()\n   \n    history.push(\"/login\");\n      }\n     \n    } catch (err) {\n      console.log(err);\n     \n    }\n\n    \n    \n    }\n  \n    fetchCustomers()\n  },[currentPage,refresh])\n\n \n  \n const [activeUser,setActiveUser]=useState('')\n\n const handleShow=(item)=>{\n  //  setActiveUser(item)\n   getCustomer(item.id)\n   \n   setPageStatus(1)\n }\n\n const handleBack=(item)=>{\n  setActiveUser('')\n  setPageStatus(0)\n}\n\n\n\nconst  getCustomer=async(id)=>{\n  \n  try {\n    const responsee = await fetch(\n      `${global.apiUrl}/super/customers/${id}`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + userToken,\n                 \n          Accept: \"application/json\",\n        },\n     }\n    );\n    if(responsee.status==204){\n     \n    }\n    const response = await responsee.json();\n    console.log('response',response);\n    console.log(response);\n    if(response.success==true){\n      setActiveUser(response.payload)\n    }\n  } catch (err) {\n    console.log(err);\n   \n  }\n}\n\n\n  return (\n    \n    <CRow>\n      {pageStatus==0&&\n       <CCol xl={12}>\n       <CCard>\n         <CCardHeader>\n           \n           {i18n.language == 'ar' ? \"الزبائن\" : \"Customers\"}\n         </CCardHeader>\n         <CCardBody className='usersTabel'>\n      { data&&  <CDataTable\n           items={data}\n           fields={['id','name','email', 'phones','company_id','company_name','actions']}\n           hover\n           striped\n           pagination\n        \n           sorter\nitemsPerPage={12}\n columnFilter\n           clickableRows\n           onRowClick={(item) => handleShow(item)}\n           scopedSlots = {{\n            'phones':\n            (item)=>(\n              <td>\n             {item.phones.lenght>0?item.phones.map((phone,index)=>{ \n               return(<React.Fragment key={index}>{phone.number}<br/></React.Fragment>)\n             })\n            :\n            '-'\n            }\n              </td>\n            ),\n             \n               'actions':\n               (item)=>(\n                 <td>\n             \n                     <CBadge className=\"p-1  m-1 badg-click\" color=\"info\"  onClick={()=>handleShow(item)}  >\n                     {i18n.language == 'ar' ? \"عرض .....\" : \"Show....\"}</CBadge> \n                  \n                 </td>\n               ),\n\n           }}\n         />}\n\n         </CCardBody>\n       </CCard>\n     </CCol>\n      }\n      {\n        pageStatus==1&&activeUser&&\n        <CCol xl={12}>\n        <CCard>\n          <CCardHeader>\n          <CRow className=\"justify-content-center row-gap-15 \">\n      \n\n\n\n        \n\n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\n            {activeUser.name}\n            </CCol>\n            <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\" row-gap-15 col-gap-15 \">\n     \n                  <CButton color=\"success\"  className='col-lg-4  col-md-4col-sm-12 col-xs-12 updatebtn'\n           onClick={()=>handleBack()} >{i18n.language == 'ar' ? `رجوع` : `Back`}\n                  </CButton>\n         \n            </CCol>\n            </CRow>\n      \n          </CCardHeader>\n          <CCardBody className=''>\n     \n        \n         \n          <CRow>\n            <CCol md='12'><strong>{i18n.language == 'ar' ? `معلومات الزبون` : `Customer Informations`}</strong></CCol>\n            \n            <CCol className=' p-1' md='6' >\n\n<ul className=\" card list-group list-group-flush\">\n<li className=\"list-group-item\"><strong>Id : {' '}</strong>{activeUser.id}</li>\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `الاسم :` :   `Name :`}\n {' '}</strong> {activeUser.name}</li>\n<li className=\"list-group-item\"><strong>\n{i18n.language == 'ar' ? `رقم الهوية المدنية :` :   `Civil Id :`}\n   {' '}</strong>{activeUser.civil_id}</li>\n   <li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `البريد الالكتروني :` :   `Email : `}{' '}</strong>{activeUser.email}</li>\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `معرف الشركة :` :   `Company Id : `}{' '}</strong>{activeUser.company_id}</li>\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `اسم الشركة :` :   `Company Name : `}{' '}</strong>{activeUser.company_name}</li>\n\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? ` هواتف : ` :   `Phones :`} {' '}</strong>\n{activeUser.phones.lenght>0?\n<>{'/ '}{\n  activeUser.phones.map((phone,index)=>{ \n    return(<React.Fragment key={index}>{phone.number+' / '}</React.Fragment>)\n  })\n}\n</>\n\n:\n            '-'\n            }</li>\n</ul>\n\n\n          </CCol>\n          <CCol className=' p-1' md='6' >\n\n<ul className=\" card list-group list-group-flush\">\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `الجادة :` :   `Avenue :`} {' '}\n</strong>{activeUser.avenue?activeUser.avenue:'-'}</li>\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `الشارع :` :   `Street :`} {' '}\n</strong>{activeUser.street?activeUser.street:'-'}</li>\n<li className=\"list-group-item\"><strong>\n{i18n.language == 'ar' ? `الكتلة :` :   `Block :`}\n   {' '}</strong>{activeUser.block?activeUser.block:'-'}</li>\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `البناء :` :   `Building :`} {' '}\n</strong>{activeUser.building?activeUser.building:'-'}</li>\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `الطابق :` :   `Floor :`} {' '}\n</strong>{activeUser.floor?activeUser.floor:'-'}</li>\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `الشقة :` :   `Flat :`} {' '}\n</strong>{activeUser.flat?activeUser.flat:'-'}</li>\n<li className=\"list-group-item\"><strong>{i18n.language == 'ar' ? `معرف المنطقة :` :   `Area Id :`}\n {' '}</strong> {activeUser.area_id}</li>\n\n  </ul>\n\n\n          </CCol>\n          {activeUser.notes &&\n          <CCol className=' p-1'  md='12'>\n          <ul className=\" card list-group list-group-flush\">\n<li className=\"list-group-item\"><strong>\n{i18n.language == 'ar' ? \"ملاحظات :\" : \"Notes : \"}\n   {' '}</strong>{activeUser.notes}</li>\n\n\n\n</ul>\n          </CCol>}\n    {activeUser.blocking_reason &&\n          <CCol className=' p-1'  md='12'>\n          <ul className=\" card list-group list-group-flush\">\n<li className=\"list-group-item\"><strong>\n{i18n.language == 'ar' ? \" سبب الحظر : \" : \" Block Reason : \"}\n   {' '}</strong>{activeUser.blocking_reason}</li>\n\n\n\n</ul>\n          </CCol>}\n    </CRow>  \n\n\n          </CCardBody>\n        </CCard>\n      </CCol>\n\n\n      }\n       {/* <CModal \n              show={small} \n              onClose={() => setSmall(!small)}\n              size=\"sm\"\n              color='danger'\n            >\n              <CModalHeader closeButton>\n                <CModalTitle>{i18n.language == 'ar' ? \"حذف مستخدم\" : \"Delete User\"}</CModalTitle>\n              </CModalHeader>\n              <CModalBody>\n              {i18n.language == 'ar' ? `هل انت متأكد أنك تريد حذف مستخدم (${itemToDelete.username})` \n              : `Are you sure you want to delete a User (${itemToDelete.username})`}\n              </CModalBody>\n              <CModalFooter>\n                <CButton color=\"danger\" onClick={() =>handleDelete()}>{i18n.language == 'ar' ? \"حذف\" : \"Delete\"}</CButton>{' '}\n                <CButton color=\"secondary\" onClick={() => setSmall(!small)}>{i18n.language == 'ar' ? \"الغاء\" : \"Cancel\"}</CButton>\n              </CModalFooter>\n            </CModal> */}\n     \n    </CRow>\n  )\n}\n\nexport default Customers\n"],"sourceRoot":""}