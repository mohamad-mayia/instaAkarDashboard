{"version":3,"sources":["views/DynamicPages/DynamicPages.js"],"names":["DynamicPages","history","useHistory","useTranslation","t","i18n","refreshTokenHandler","useContext","ProfileContext","useState","small","setSmall","data","setData","refresh","setRefresh","pageStatus","setPageStatus","tokenString","localStorage","getItem","userToken","JSON","parse","useEffect","a","fetchpages","e","fetch","global","apiUrl","method","headers","Authorization","Accept","responsee","status","json","response","message","payload","activeUser","id","setActiveUser","filter","item","console","log","itemToDelete","setItemToDelete","handleDelete","document","getElementById","style","opacity","xl","className","md","lg","language","color","onClick","push","items","fields","label","key","hover","striped","pagination","itemsPerPage","scopedSlots","title","ar","en","handleShowModal","handleShow","name","direction","textAlign","dangerouslySetInnerHTML","__html","body","show","onClose","size","closeButton"],"mappings":"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","file":"static/js/83.0ed9bbd1.chunk.js","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport ReactFancyBox from 'react-fancybox'\r\nimport 'react-fancybox/lib/fancybox.css'\r\nimport {\r\n  CBadge,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CDataTable,\r\n  CRow,\r\n  CPagination,\r\n  CButton,\r\n  CForm,\r\n  CModal,\r\n  CModalBody,\r\n  CModalFooter,\r\n  CModalHeader,\r\n  CModalTitle,\r\n  CFormGroup,\r\n  CLabel,\r\n  CSelect,\r\n  CInput,\r\n  CInputGroup,\r\n  CInputGroupPrepend,\r\n  CInputGroupText,\r\n  CCardFooter\r\n} from '@coreui/react'\r\nimport { CAlert } from '@coreui/react'\r\nimport '../../globalVar'\r\nimport './DynamicPages.scss'\r\n\r\nimport { useTranslation } from 'react-i18next';\r\nimport { ProfileContext } from 'src/App'\r\n\r\n\r\n\r\nconst DynamicPages = () => {\r\n  const history = useHistory()\r\n  const [t, i18n] = useTranslation();\r\n\r\n  const { refreshTokenHandler } = useContext(ProfileContext)\r\n  const [small, setSmall] = useState(false)\r\n\r\n\r\n  const [data, setData] = useState('')\r\n  const [refresh, setRefresh] = useState(false)\r\n\r\n\r\n\r\n  const [pageStatus, setPageStatus] = useState(0)\r\n  const tokenString = localStorage.getItem(\"token\");\r\n  const userToken = JSON.parse(tokenString);\r\n\r\n  useEffect(async () => {\r\n    const fetchpages = async (e) => {\r\n      const userToken = JSON.parse(localStorage.getItem(\"token\"));\r\n      try {\r\n        const responsee = await fetch(\r\n          `${global.apiUrl}api/websitePages`,\r\n          {\r\n            method: \"GET\",\r\n            headers: {\r\n              Authorization: \"Bearer \" + userToken,\r\n              Accept: \"application/json\",\r\n            },\r\n\r\n          }\r\n        );\r\n        if (responsee.status == 204) { setData([]) }\r\n        const response = await responsee.json();\r\n        // console.log('response',response);\r\n        if (response.message && response.message == \"Unauthenticated.\") {\r\n          return refreshTokenHandler(function () { fetchpages(e) })\r\n        }\r\n        if (response.message && response.message == \"Success\") {\r\n          setData(response.payload)\r\n          if (activeUser.id) { setActiveUser(response.payload.filter(item => item.id == activeUser.id)[0]) }\r\n\r\n        }\r\n\r\n\r\n      } catch (err) {\r\n        console.log(err);\r\n\r\n      }\r\n\r\n\r\n\r\n    }\r\n\r\n    fetchpages()\r\n  }, [refresh])\r\n\r\n\r\n\r\n  const [activeUser, setActiveUser] = useState('')\r\n\r\n  const handleShow = (item) => {\r\n    setActiveUser(item)\r\n    // getUser(item.id)\r\n\r\n    setPageStatus(1)\r\n  }\r\n\r\n  const handleBack = (item) => {\r\n    setActiveUser('')\r\n    setPageStatus(0)\r\n\r\n  }\r\n\r\n  const [itemToDelete, setItemToDelete] = useState('')\r\n  const handleShowModal = (item) => {\r\n    setSmall(true)\r\n    setItemToDelete(item)\r\n  }\r\n  const handleDelete = async () => {\r\n\r\n    document.getElementById('root').style.opacity = 0.75;\r\n\r\n    try {\r\n      const responsee = await fetch(\r\n        `${global.apiUrl}api/websitePages/${itemToDelete.id}`,\r\n        {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            Authorization: \"Bearer \" + userToken,\r\n\r\n            Accept: \"application/json\",\r\n          },\r\n\r\n\r\n        }\r\n      );\r\n      const response = await responsee.json();\r\n\r\n      if (response.message && response.message === \"Unauthenticated.\") {\r\n        return refreshTokenHandler(function () { handleDelete() })\r\n      }\r\n\r\n      if (responsee.status == 200) {\r\n        setSmall(false)\r\n        document.getElementById('root').style.opacity = 1;\r\n\r\n        setRefresh(!refresh)\r\n\r\n      }\r\n      // else{\r\n      // setErrorMessage(response.errors)\r\n      // }\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n\r\n    }\r\n    document.getElementById('root').style.opacity = 1;\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n\r\n    <CRow>\r\n      {pageStatus == 0 &&\r\n        <CCol xl={12}>\r\n          <CCard>\r\n            <CCardHeader>\r\n\r\n              <CRow className=\" row-gap-15\">\r\n\r\n                <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\r\n                  <strong> {i18n.language === \"ar\" ? \"الصفحات\" : \"The Pages\"}</strong>\r\n                </CCol>\r\n\r\n                <CCol md=\"6\" lg=\"6\" xl=\"6\" className='row-gap-15 col-gap-15'>\r\n\r\n                  <CButton color=\"success\" className='col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn'\r\n                    onClick={() => history.push('/DynamicPages/AddNewPage')} > {i18n.language === \"ar\" ? \"إضافة صفحة جديدة\" : \"Add New Page\"}\r\n                  </CButton>\r\n\r\n                </CCol>\r\n\r\n\r\n\r\n\r\n              </CRow>\r\n            </CCardHeader>\r\n            <CCardBody className='usersTabel'>\r\n              {data && <CDataTable\r\n                items={data}\r\n                fields={['id', { label: i18n.language === \"ar\" ? \"الاسم\" : \"Name\", key: 'name' },\r\n                  { label: i18n.language === \"ar\" ? \"العنوان العربي\" : \"Arabic Title\", key: 'name_ar' },\r\n                  { label: i18n.language === \"ar\" ? \"العنوان الانكليزي\" : \"English Title\", key: 'name_en' },\r\n                  { label: i18n.language === \"ar\" ? \"عمليات\" : \"Actions\", key: 'Actions' }]}\r\n                hover\r\n                striped\r\n                pagination\r\n\r\n                // sorter\r\n                itemsPerPage={12}\r\n                // columnFilter\r\n                // clickableRows\r\n                // onRowClick={(item) => history.push(`/users/${item.id}`)}\r\n                scopedSlots={{\r\n                  'name_ar': (item) => (<td> {item.title.ar}  </td>),\r\n                  'name_en': (item) => (<td> {item.title.en}  </td>),\r\n                  'Actions':\r\n                    (item) => (\r\n                      <td>\r\n                        <CBadge className=\"p-1 m-1 badg-click\" color=\"danger\"\r\n                          onClick={() => handleShowModal(item)}\r\n                        >{i18n.language == 'ar' ? \"حذف\" : \"Delete\"}</CBadge>\r\n                        <CBadge className=\"p-1  m-1 badg-click\" color=\"info\" onClick={() => handleShow(item)}  >\r\n                          {i18n.language == 'ar' ? \"عرض .....\" : \"Show....\"}</CBadge>\r\n\r\n                      </td>\r\n                    ),\r\n\r\n                }}\r\n              />}\r\n\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n      }\r\n      {\r\n        pageStatus == 1 && activeUser &&\r\n        <CCol xl={12}>\r\n          <CCard>\r\n            <CCardHeader>\r\n              <CRow className=\"justify-content-center row-gap-15 \">\r\n\r\n\r\n\r\n\r\n                <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\"justify-content-center align-self-center align-items-center place-items-center text-capitalize\">\r\n                  {activeUser.name}\r\n                </CCol>\r\n                <CCol md=\"6\" lg=\"6\" xl=\"6\" className=\" row-gap-15 col-gap-15 \">\r\n                  <CButton color=\"info\" className='col-lg-4  col-md-4 col-sm-12 col-xs-12 updatebtn'\r\n                    onClick={() => history.push(`/DynamicPages/Update/${activeUser.id}`)} >\r\n\r\n                    {t(\"Update\")}\r\n                  </CButton>\r\n                  <CButton color=\"success\" className='col-lg-4  col-md-4col-sm-12 col-xs-12 updatebtn'\r\n                    onClick={() => handleBack()} >{t(\"Back\")}\r\n                  </CButton>\r\n\r\n                </CCol>\r\n              </CRow>\r\n\r\n            </CCardHeader>\r\n            <CCardBody className=''>\r\n              <CRow>\r\n                <CCol md='12'><strong>{i18n.language === \"ar\" ? \"معلومات صفحة\" : \"Page Information\"}</strong></CCol>\r\n                <CCol lg={6}>\r\n                  <table className=\"table table-striped table-hover\">\r\n                    <tbody>\r\n\r\n                      <tr >\r\n                        <td> {i18n.language === \"ar\" ? \"العنوان العربي\" : \"Arabic Title\"}\r\n                        </td>\r\n                        <td><strong>{activeUser.title.ar}</strong></td>\r\n                      </tr>\r\n\r\n                    </tbody>\r\n                  </table>\r\n                </CCol>\r\n                <CCol lg={6}>\r\n                  <table className=\"table table-striped table-hover\">\r\n                    <tbody>\r\n\r\n                      <tr >\r\n                        <td>{i18n.language === \"ar\" ? \"العنوان الانكليزي\" : \"English Title\"} </td>\r\n                        <td><strong>{activeUser.title.en}</strong></td>\r\n                      </tr>\r\n\r\n\r\n\r\n\r\n                    </tbody>\r\n                  </table>\r\n                </CCol>\r\n              </CRow>\r\n              <hr />\r\n\r\n\r\n              <CRow style={{ direction: 'ltr' }}>\r\n                <CCol md='12'><strong>{i18n.language === \"ar\" ? \"محتوى انكليزي\" : \"English Content\"}</strong></CCol>\r\n                <CCol style={{ textAlign: 'start' }} lg={12} dangerouslySetInnerHTML={{ __html: activeUser.body.en }}\r\n                >\r\n\r\n                </CCol>\r\n              </CRow>\r\n              <hr />\r\n              <CRow>\r\n                <CCol md='12'><strong>{i18n.language === \"ar\" ? \"محتوى عربي\" : \"Arabic Content\"}</strong></CCol>\r\n                <CCol lg={12} dangerouslySetInnerHTML={{ __html: activeUser.body.ar }}>\r\n\r\n                </CCol>\r\n              </CRow>\r\n\r\n\r\n\r\n\r\n\r\n\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n\r\n\r\n      }\r\n      <CModal\r\n        show={small}\r\n        onClose={() => setSmall(!false)}\r\n        size=\"sm\"\r\n        color='danger'\r\n      >\r\n        <CModalHeader closeButton>\r\n          <CModalTitle>{i18n.language === \"ar\" ? \"حذف صفحة\" : \"Delete Page\"}  </CModalTitle>\r\n        </CModalHeader>\r\n        <CModalBody>\r\n          {`${i18n.language === \"ar\" ? \"هل انت متأكد من حذف صفحة\" : \"Are you sure you want to delete the page\"}   (${itemToDelete.name && itemToDelete.name})`}\r\n\r\n        </CModalBody>\r\n        <CModalFooter>\r\n          <CButton color=\"danger\" onClick={() => handleDelete()}>{t(\"Delete\")} </CButton>{' '}\r\n          <CButton color=\"secondary\" onClick={() => setSmall(false)}>{t(\"Cancel\")}</CButton>\r\n        </CModalFooter>\r\n      </CModal>\r\n\r\n    </CRow>\r\n  )\r\n}\r\n\r\nexport default DynamicPages\r\n"],"sourceRoot":""}