(this.webpackJsonpinstaakar=this.webpackJsonpinstaakar||[]).push([[52],{1191:function(e,c,t){"use strict";t.r(c),function(e){var n=t(175),a=t(45),s=t(121),r=t.n(s),l=t(174),i=t(659),o=t(1),j=t(658),u=(t(661),t(663),t(1192),t(14)),d=t(1503),b=(t(660),t(17));c.default=function(c){var t=c.match,s=Object(d.a)(),h=Object(i.a)(s,2),m=h[0],x=h[1],O=Object(u.g)(),p=Object(o.useState)(10),g=Object(i.a)(p,2),f=g[0],y=g[1],w=Object(o.useState)([]),v=Object(i.a)(w,2),k=(v[0],v[1],Object(o.useState)("")),S=Object(i.a)(k,2),C=S[0],N=S[1],_=Object(o.useState)(),A=Object(i.a)(_,2),B=A[0],F=A[1],J=Object(o.useState)(),E=Object(i.a)(J,2),I=E[0],z=E[1],K=Object(o.useState)(""),T=Object(i.a)(K,2),U=T[0],q=T[1],D=localStorage.getItem("token"),G=JSON.parse(D),P=Object(o.useState)(""),H=Object(i.a)(P,2),L=(H[0],H[1],Object(o.useState)({name_en:"",name_ar:"",code:""})),M=Object(i.a)(L,2),Q=M[0],R=M[1],V=Q.name_en,W=Q.name_ar,X=Q.code;Object(o.useEffect)(Object(l.a)(r.a.mark((function c(){var n;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=function(){var c=Object(l.a)(r.a.mark((function c(n){var a,s,l;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,fetch("".concat(e.apiUrl,"api/cities/getCityByCountryId?country_id=").concat(t.params.CountryId),{method:"GET",headers:{Authorization:"Bearer "+G,Accept:"application/json"}});case 3:return(a=c.sent).status,c.next=7,a.json();case 7:s=c.sent,console.log("response",s),console.log(s),1==s.success&&(l=s.payload.filter((function(e){return e.id==n}))[0],R({name_en:l.name_en,name_ar:l.name_ar,code:l.code})),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.log(c.t0);case 16:case"end":return c.stop()}}),c,null,[[0,13]])})));return function(e){return c.apply(this,arguments)}}(),c.next=3,n(t.params.id);case 3:case"end":return c.stop()}}),c)}))),[C]);var Y=function(e){R(Object(a.a)(Object(a.a)({},Q),{},Object(n.a)({},e.target.name,e.target.value))),F(""),z("")},Z=function(){var c=Object(l.a)(r.a.mark((function c(n){var a,s;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),q(!0),F(""),z(""),c.prev=4,c.next=7,fetch("".concat(e.apiUrl,"api/cities/updateCity"),{method:"POST",headers:{Authorization:"Bearer "+G,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name_en:V,name_ar:W,code:X,city_id:t.params.id})});case 7:return a=c.sent,c.next=10,a.json();case 10:if(s=c.sent,y(10),!s.success){c.next=19;break}return c.next=15,y(6);case 15:z("City has been updated successfully"),N(!C),c.next=21;break;case 19:y(10),F(s.errors);case 21:c.next=26;break;case 23:c.prev=23,c.t0=c.catch(4),console.log(c.t0);case 26:q(!1);case 27:case"end":return c.stop()}}),c,null,[[4,23]])})));return function(e){return c.apply(this,arguments)}}();return console.log("data",Q),Object(b.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center register-cont",children:Object(b.jsx)(j.w,{children:Object(b.jsxs)(j.j,{className:"",children:[Object(b.jsx)(j.n,{children:Object(b.jsxs)(j.wb,{className:" row-gap-15",children:[Object(b.jsx)(j.u,{md:"6",lg:"6",xl:"6",className:"justify-content-center align-self-center align-items-center place-items-center text-capitalize",children:Object(b.jsx)("strong",{children:"ar"==x.language?"\u062a\u0639\u062f\u064a\u0644 \u062f\u0648\u0644\u0629":"Update City"})}),Object(b.jsx)(j.u,{md:"6",lg:"6",xl:"6",className:"row-gap-15 col-gap-15",children:Object(b.jsx)(j.f,{color:"success",className:"col-lg-6  col-md-6 col-sm-12 col-xs-12 updatebtn",onClick:function(){return O.goBack()},children:"ar"==x.language?"\u0631\u062c\u0648\u0639":"Back"})})]})}),Object(b.jsx)(j.wb,{children:Object(b.jsx)(j.u,{xs:"12",sm:"12",md:"12",className:"",children:Object(b.jsx)(j.J,{onSubmit:function(e){Z(e)},children:Object(b.jsx)(j.k,{children:Object(b.jsxs)(j.j,{children:[Object(b.jsx)(j.k,{children:Object(b.jsxs)(j.wb,{children:[Object(b.jsxs)(j.u,{md:"12",children:[" ",Object(b.jsx)("strong",{children:"ar"==x.language?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062f\u0648\u0644\u0629 :":"City Informations :"})]}),Object(b.jsx)(j.u,{md:"6",lg:"6",xl:"6",children:Object(b.jsxs)(j.K,{row:!0,children:[Object(b.jsx)(j.u,{md:"12",children:Object(b.jsx)(j.cb,{htmlFor:"text-input",children:"English Name"})}),Object(b.jsx)(j.u,{xs:"12",md:"12",children:Object(b.jsx)(j.S,{name:"name_en",required:!0,onChange:Y,placeholder:"English Name",value:Q.name_en})})]})}),Object(b.jsx)(j.u,{md:"6",lg:"6",xl:"6",children:Object(b.jsxs)(j.K,{row:!0,children:[Object(b.jsx)(j.u,{md:"12",children:Object(b.jsx)(j.cb,{htmlFor:"text-input",children:"Arabic Name"})}),Object(b.jsx)(j.u,{xs:"12",md:"12",children:Object(b.jsx)(j.S,{name:"name_ar",onChange:Y,placeholder:"Arabic Name",value:Q.name_ar})})]})}),Object(b.jsx)(j.u,{md:"6",lg:"6",xl:"6",children:Object(b.jsxs)(j.K,{row:!0,children:[Object(b.jsx)(j.u,{md:"12",children:Object(b.jsx)(j.cb,{htmlFor:"text-input",children:"City Code"})}),Object(b.jsx)(j.u,{xs:"12",md:"12",children:Object(b.jsx)(j.S,{name:"code",onChange:Y,placeholder:"City Code",value:Q.code})})]})})]})}),Object(b.jsx)(j.l,{className:"p-4",children:Object(b.jsxs)(j.wb,{className:"justify-content-center",children:[B&&Object(b.jsx)(j.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"danger",show:f,onShowChange:y,children:Object.keys(B).map((function(e,c){return Object(b.jsxs)(b.Fragment,{children:[B[e],Object(b.jsx)("br",{})]})}))}),I&&Object(b.jsx)(j.a,{className:"col-lg-12  col-md-12 col-sm-12 col-xs-12 ",color:"success",show:f,onShowChange:y,children:I}),Object(b.jsx)(j.u,{md:"6",lg:"6",xl:"6",xs:"12",sm:"12",children:Object(b.jsxs)(j.f,{color:"success",block:!0,type:"submit",children:[m("Save"),U&&Object(b.jsxs)(b.Fragment,{children:[" ",Object(b.jsx)("i",{className:"fa fa-spinner fa-spin"})]})," "]})})]})})]})})})})})]})})})}}.call(this,t(73))},1192:function(e,c,t){},661:function(e,c,t){}}]);
//# sourceMappingURL=52.8e77c71d.chunk.js.map